<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2025-11-07T11:27:25+01:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Xavi Vico Marti</title><subtitle>An amazing website.</subtitle><author><name>Xavi Vico Marti</name></author><entry><title type="html">Red Hat Ansible Automation Platform 2.6: Gu√≠a de Integraci√≥n con Active Directory (LDAP/LDAPS)</title><link href="http://localhost:4000/redhat/activedirectory/Red-Hat-Ansible-Automation-Platform-2.6-Gu%C3%ADa-de-Integraci%C3%B3n-con-Active-Directory-(LDAP-LDAPS)/" rel="alternate" type="text/html" title="Red Hat Ansible Automation Platform 2.6: Gu√≠a de Integraci√≥n con Active Directory (LDAP/LDAPS)" /><published>2025-11-07T00:00:00+01:00</published><updated>2025-11-07T00:00:00+01:00</updated><id>http://localhost:4000/redhat/activedirectory/Red-Hat-Ansible-Automation-Platform-2.6:-Gu%C3%ADa-de-Integraci%C3%B3n-con-Active-Directory-(LDAP-LDAPS)</id><content type="html" xml:base="http://localhost:4000/redhat/activedirectory/Red-Hat-Ansible-Automation-Platform-2.6-Gu%C3%ADa-de-Integraci%C3%B3n-con-Active-Directory-(LDAP-LDAPS)/"><![CDATA[<h1 id="introducci√≥n">Introducci√≥n</h1>

<p>El prop√≥sito de este documento es mostrar c√≥mo integrar Ansible Automation Platform (AAP) con Active Directory mediante el protocolo LDAP o LDAPS, permitiendo que los usuarios del dominio puedan autenticarse directamente con sus credenciales corporativas. Con esta configuraci√≥n, los usuarios del dominio podr√°n iniciar sesi√≥n directamente en AAP con sus credenciales, sin que el sistema almacene contrase√±as locales.</p>

<p>AAP delega la autenticaci√≥n a AD a trav√©s de consultas LDAP/LDAPS, lo que permite una gesti√≥n segura y centralizada de usuarios, grupos y permisos.</p>

<h2 id="arquitectura-de-autenticaci√≥n-en-aap-26">Arquitectura de autenticaci√≥n en AAP 2.6</h2>

<p>En la versi√≥n 2.6, AAP utiliza un servicio central de autenticaci√≥n (Platform Gateway). Este gateway consolida los m√©todos de login (LDAP, SAML, OIDC, autenticaci√≥n local, etc.) en un sistema modular y extensible, basado en autenticadores y mapeos.</p>

<p>Cada autenticador define c√≥mo se conecta la plataforma a una fuente externa (como AD), mientras que los mapeos controlan c√≥mo los usuarios autenticados se asocian a organizaciones, equipos o roles dentro de AAP.</p>

<table>
  <thead>
    <tr>
      <th>Concepto</th>
      <th>Descripci√≥n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Authenticator Plugin</strong></td>
      <td>Tipo de conexi√≥n (LDAP, SAML, OIDC, etc.).</td>
    </tr>
    <tr>
      <td><strong>Authenticator</strong></td>
      <td>Instancia del plugin con su configuraci√≥n espec√≠fica (por ejemplo, la URL del servidor LDAP al que necesita conectarse).</td>
    </tr>
    <tr>
      <td><strong>Authenticator Map</strong></td>
      <td>Reglas que definen permisos o acceso seg√∫n grupos o atributos de usuario.</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Esta arquitectura ‚Äúpluggable‚Äù permite tener m√∫ltiples autenticadores activos, incluso del mismo tipo (por ejemplo, varios LDAP apuntando a distintos dominios o unidades organizativas).</p>
</blockquote>

<h2 id="flujo-de-autenticaci√≥n">Flujo de autenticaci√≥n</h2>

<p><img src="/assets/images/20251107/20251107-01.png" alt="Texto alternativo" /></p>

<h2 id="requisitos-previos">Requisitos previos</h2>

<p>Antes de empezar, tenemos que asegurarnos de tener todo lo necessario:</p>

<ul>
  <li>Ansible Automation Platform 2.6 instalado y operativo.</li>
  <li>Una instancia en ejecuci√≥n de su fuente de autenticaci√≥n (Active Directory Windows Server 2019 en mi caso) funcionando, con acceso de red desde AAP.</li>
  <li>Certificado del servidor LDAPS, en caso de usar conexi√≥n segura.</li>
  <li>Credenciales de administrador en AAP con acceso a Access Management ‚Üí Authentication Methods.</li>
</ul>

<p>Siempre se recomienda usar LDAPS (puerto 636) para cifrar las credenciales y proteger las consultas del dominio.</p>

<h2 id="gu√≠a-demo">Gu√≠a DEMO</h2>

<p>El objetivo de esta gu√≠a es integrar Ansible Automation Platform con Active Directory (Windows Server 2019) usando LDAP, de modo que la autenticaci√≥n de usuarios se gestione desde el directorio corporativo sin necesidad de credenciales locales en AAP.</p>

<p>Primero vamos a crear un nuevo autenticador en Ansible Automation Platform, para ello iniciamos sesi√≥n entrando desde el navegador.</p>

<p><img src="/assets/images/20251107/20251107-02.png" alt="Texto alternativo" /></p>

<p>En la interfaz de AAP, navegamos hasta Access Management ‚Üí Authentication Methods ‚Üí Create authentication.</p>

<p><img src="/assets/images/20251107/20251107-03.png" alt="Texto alternativo" /></p>

<p>Una vez aqu√≠ podemos ver los m√©todos de autenticaci√≥n creados, seleccionamos crear m√©todo para configurar otro m√©todo de autenticaci√≥n.</p>

<h3 id="configuraci√≥n-del-m√©todo-de-autenticaci√≥n">Configuraci√≥n del m√©todo de autenticaci√≥n</h3>

<p>Esta parte es importante vamos a ver cada uno de los campos para entender mejor c√≥mo funciona todo. Es una parte un poco m√°s te√≥rica y larga, as√≠ que si ya sabemos c√≥mo van estos par√°metros, podemos saltarnos esto i ir directamente al punto ‚ÄúActive Directory Authenticator ‚Äì Configuraci√≥n‚Äù.</p>

<p><img src="/assets/images/20251107/20251107-04.png" alt="Texto alternativo" /></p>

<hr />

<details>
  <summary><strong>üìò Name</strong></summary>

El campo Name sirve para dar un nombre a esta configuraci√≥n de autenticaci√≥n.<br /><br />  
Por ejemplo, podemos asignarle un nombre descriptivo como:

<br /><br /><code>Active Directory Authenticator</code><br /><br />

</details>
<hr />
<details>
  <summary><strong>üìò Authentication type</strong></summary>

Seleccionamos LDAP en el campo de Authentication type. La secci√≥n de Detalles de Autenticaci√≥n se actualizar√° autom√°ticamente para mostrar los campos relevantes seg√∫n el tipo seleccionado.

<br /><br /><code>LDAP</code><br /><br />

</details>
<hr />

<details>
  <summary><strong>üìò LDAP Server URI</strong></summary>

En este campo se debe ingresar la URL del servidor LDAP o Active Directory al cual Ansible Automation Platform (AAP) se conectar√° para autenticar a los usuarios.<br /><br />

La URL define el protocolo, el nombre del servidor (o su direcci√≥n IP), y el puerto de conexi√≥n. El formato general es:

<br /><br /><code>ldap://&lt;nombre_servidor&gt;:&lt;puerto&gt;</code><br /><br />

Por ejemplo, en nuestro caso utilizaremos:

<br /><br /><code>ldap://padthai.org:389</code><br /><br />

<ul>
  <li><code>ldap://</code> indica que se utilizar√° el protocolo LDAP est√°ndar sin cifrado (el m√©todo seguro ser√≠a <code>ldaps://</code>).</li>
  <li><code>padthai.org</code> es el nombre del dominio o servidor que aloja el servicio LDAP.</li>
  <li><code>389</code> es el puerto predeterminado para conexiones LDAP sin TLS (con LDAPS ser√≠a <code>636</code>).</li>
</ul>

AAP tambi√©n permite especificar m√∫ltiples servidores LDAP en este campo, separados por espacios o comas. Esto es √∫til para proporcionar alta disponibilidad o tolerancia a fallos. Por ejemplo:

<br /><br /><code>ldap://ldap1.padthai.org:389 ldap://ldap2.padthai.org:389</code><br /><br />

Cuando sea posible, se recomienda utilizar LDAPS (LDAP sobre SSL) o StartTLS para cifrar la comunicaci√≥n entre AAP y el servidor de directorio.  <br /><br />
El formato para conexiones seguras es:

<br /><br /><code>ldaps://padthai.org:636</code><br /><br />

</details>
<hr />

<details>
  <summary><strong>üìò LDAP Bind DN</strong></summary>

En este campo se especifica el Distinguished Name (DN) del usuario que Ansible Automation Platform (AAP) utilizar√° para autenticarse contra el servidor LDAP o Active Directory.  <br /><br />
Este usuario es conocido como la cuenta de enlace o <em>Bind User</em>, y su funci√≥n es permitir que AAP realice b√∫squedas dentro del √°rbol de directorios para validar las credenciales de los usuarios que intentan iniciar sesi√≥n.<br /><br />

El DN (<em>Distinguished Name</em>) es una cadena que identifica de forma √∫nica a un objeto dentro de la jerarqu√≠a del directorio LDAP. Est√° compuesto por varios componentes jer√°rquicos, como:

<ul>
  <li><strong>CN</strong> (Common Name): el nombre del objeto o usuario.</li>
  <li><strong>OU</strong> (Organizational Unit): la unidad organizativa donde se encuentra el objeto (si aplica).</li>
  <li><strong>DC</strong> (Domain Component): los componentes del dominio, que representan la estructura DNS del dominio de Active Directory.</li>
</ul>

Por ejemplo, si el usuario que AAP utilizar√° para enlazarse con el servidor LDAP es el Administrador del dominio, su DN podr√≠a tener el siguiente formato (en nuestro caso es este mismo, ya que lo hemos hecho lo m√°s simple posible):

<br /><br /><code>CN=Administrator,CN=Users,DC=padthai,DC=org</code><br /><br />

Esto indica que:

<ul>
  <li>El nombre com√∫n (<code>CN</code>) del usuario es <code>Administrator</code>.</li>
  <li>Este usuario se encuentra en el contenedor predeterminado <code>Users</code>.</li>
  <li>El dominio al que pertenece est√° formado por los componentes <code>padthai.org</code>.</li>
</ul>

En entornos m√°s complejos, el usuario de enlace puede estar ubicado en una unidad organizativa diferente, por ejemplo:

<br /><br /><code>CN=ldap-bind,OU=ServiceAccounts,DC=padthai,DC=org</code><br /><br />

Por motivos de seguridad, es preferible utilizar una cuenta de servicio dedicada con permisos m√≠nimos de lectura en el directorio, en lugar de la cuenta de administrador del dominio.  <br /><br />
Como esto es solo una prueba, hemos utilizado el Administrador, aunque en entornos de producci√≥n se debe evitar.

</details>
<hr />
<details>
  <summary><strong>üìò LDAP Bind Password</strong></summary>

En este campo se debe ingresar la contrase√±a del usuario de enlace (<em>Bind DN</em>) configurado previamente.  
Esta credencial permite que Ansible Automation Platform (AAP) se autentique ante el servidor LDAP y realice las b√∫squedas necesarias dentro del directorio.<br /><br />

Por ejemplo, si en el campo LDAP Bind DN se especific√≥ el usuario:

<br /><br /><code>CN=Administrator,CN=Users,DC=padthai,DC=org</code><br /><br />

Entonces en LDAP Bind Password se debe ingresar la contrase√±a correspondiente a esta cuenta.<br /><br />

<strong>Importante:</strong>

<ul>
  <li>Esta contrase√±a se almacena sin cifrado si se utiliza el protocolo LDAP (puerto 389), ya que la comunicaci√≥n no est√° protegida.</li>
  <li>Por esta raz√≥n, se recomienda utilizar LDAPS (puerto 636) o StartTLS para asegurar la conexi√≥n y evitar que las credenciales sean transmitidas en texto plano.</li>
  <li>En entornos de laboratorio o pruebas, esto puede no ser cr√≠tico, pero nunca debe aplicarse en entornos de producci√≥n sin cifrado.</li>
  <li>Por motivos de seguridad, en la interfaz de AAP el valor de este campo aparece enmascarado (por ejemplo, como <code>*******</code>), aunque internamente se guarda en texto claro si no se usa cifrado.</li>
</ul>

</details>

<hr />
<details>
  <summary><strong>üìò LDAP Group Type</strong></summary>

Este campo define el tipo de grupos que utiliza el servidor LDAP o Active Directory, y determina c√≥mo Ansible Automation Platform (AAP) interpretar√° y consultar√° la pertenencia de los usuarios a dichos grupos.<br /><br />

Dependiendo del tipo de servidor LDAP en uso (por ejemplo, Active Directory, OpenLDAP, FreeIPA, etc.), la estructura interna de los grupos puede variar.  <br /><br />
Por ello, AAP requiere que se seleccione el tipo de grupo adecuado para poder realizar correctamente la b√∫squeda de pertenencias y aplicar los permisos o roles asociados.<br /><br />

Algunos de los tipos de grupo m√°s comunes son:

<ul>
  <li><code>ActiveDirectoryGroupType</code> ‚Äî para entornos Microsoft Active Directory.</li>
  <li><code>GroupOfNamesType</code> ‚Äî para servidores LDAP que usan objetos del tipo <code>groupOfNames</code>.</li>
  <li><code>GroupOfUniqueNamesType</code> ‚Äî similar al anterior, pero basado en el atributo <code>uniqueMember</code>.</li>
  <li><code>PosixGroupType</code> ‚Äî para entornos Unix/Linux que utilizan el atributo <code>memberUid</code>.</li>
</ul>

La lista completa de tipos de grupo disponibles y su descripci√≥n detallada puede consultarse en la documentaci√≥n oficial de Django Auth LDAP: <br /><br />

<a href="https://django-auth-ldap.readthedocs.io/en/stable/groups.html#types-of-groups" target="_blank">Documentaci√≥n oficial de tipos de grupos</a> <br /><br />

En la mayor√≠a de los entornos con Active Directory, el valor correcto ser√° <code>ActiveDirectoryGroupType</code>, ya que coincide con el esquema de grupo utilizado por Microsoft.

</details>
<hr />

<details>
  <summary><strong>üìò LDAP User DN Template</strong></summary>

Este campo permite definir una plantilla fija para construir el Distinguished Name (DN) de los usuarios que intentan autenticarse, como alternativa a realizar b√∫squedas en el directorio.<br /><br />

Cuando todos los usuarios dentro del servidor LDAP o Active Directory siguen una estructura de DN consistente, esta opci√≥n puede ser m√°s eficiente que usar el m√©todo de b√∫squeda (<em>User Search Base</em>), ya que evita consultas adicionales al directorio.<br /><br />

La sintaxis general de este campo es:

<br /><br /><code>uid=%(user)s,&lt;ruta_del_contenedor&gt;</code><br /><br />

o, en el caso de Active Directory:

<br /><br /><code>CN=%(user)s,CN=Users,DC=padthai,DC=org</code><br /><br />

Donde:

<ul>
  <li><code>%(user)s</code> se reemplaza autom√°ticamente por el nombre de usuario ingresado en el inicio de sesi√≥n.</li>
  <li>Los dem√°s componentes (CN, OU, DC, etc.) definen la ubicaci√≥n en el √°rbol LDAP donde se encuentran los usuarios.</li>
</ul>

Por ejemplo, si todos los usuarios del dominio <code>padthai.org</code> se ubican en el contenedor <code>Users</code>, la plantilla podr√≠a ser:

<br /><br /><code>CN=%(user)s,CN=Users,DC=padthai,DC=org</code><br /><br />

Esto permitir√° que AAP construya directamente el DN completo de cada usuario a partir del nombre ingresado, sin necesidad de buscarlo en el directorio.


<ul>
  <li>Si se define este campo, AAP ignorar√° la configuraci√≥n de User Search Base (<code>AUTH_LDAP_USER_SEARCH</code>).</li>
  <li>Esta opci√≥n solo debe utilizarse cuando la estructura del directorio es uniforme y todos los usuarios siguen el mismo patr√≥n de DN.</li>
  <li>En entornos m√°s complejos, donde los usuarios se distribuyen en varias unidades organizativas (OU), es preferible usar la b√∫squeda de usuarios (User Search Base) para evitar fallos de autenticaci√≥n.</li>
</ul>

</details>

<hr />

<details>
  <summary><strong>üìò LDAP Start TLS</strong></summary>

Este par√°metro determina si se debe habilitar el cifrado TLS (Transport Layer Security) sobre una conexi√≥n LDAP est√°ndar que no usa SSL (es decir, conexiones a trav√©s del puerto 389).<br /><br />

Cuando esta opci√≥n est√° activada, Ansible Automation Platform (AAP) establece primero una conexi√≥n LDAP sin cifrar y, a continuaci√≥n, inicia una negociaci√≥n TLS para proteger la comunicaci√≥n.  <br /><br />
Esto permite mantener el mismo puerto de conexi√≥n (389) pero garantizando la confidencialidad e integridad de los datos transmitidos, incluidas las credenciales del usuario de enlace (Bind DN) y las respuestas del servidor.<br /><br />

En t√©rminos pr√°cticos:

<ul>
  <li>Si la URL del servidor es <code>ldap://padthai.org:389</code> y esta opci√≥n est√° habilitada, la sesi√≥n LDAP se cifrar√° mediante TLS.</li>
  <li>Si la URL es <code>ldaps://padthai.org:636</code>, no es necesario habilitar StartTLS, ya que la conexi√≥n ya est√° protegida mediante SSL nativo.</li>
</ul>

<strong>Recomendaciones:</strong>

<ul>
  <li>En entornos de producci√≥n, siempre debe habilitarse StartTLS (o usarse LDAPS) para evitar la transmisi√≥n de credenciales en texto claro.</li>
  <li>Si se trata de un entorno de laboratorio o pruebas, puede dejarse desactivado, aunque esto implica que las comunicaciones no estar√°n cifradas.</li>
  <li>El servidor LDAP debe tener un certificado v√°lido configurado para que la negociaci√≥n TLS funcione correctamente.</li>
</ul>

</details>
<hr />

<details>
  <summary><strong>üìò Additional Authenticator Fields</strong></summary>

Este campo permite definir par√°metros adicionales que pueden ser utilizados por el autenticador, en este caso el conector LDAP.<br /><br />

Los valores que se introduzcan aqu√≠ no son validados ni procesados directamente por Ansible Automation Platform (AAP); en su lugar, son transmitidos tal cual al autenticador subyacente.  <br /><br />
Esto ofrece flexibilidad para incluir configuraciones o atributos personalizados que no est√©n contemplados en los campos est√°ndar de la interfaz.<br /><br />

Por ejemplo, podr√≠an definirse par√°metros espec√≠ficos del entorno o del servidor LDAP, tales como:

<br /><br /><code>
AUTH_LDAP_CONNECTION_TIMEOUT: 5<br />
AUTH_LDAP_REQUIRE_GROUP: "CN=admins,CN=Users,DC=padthai,DC=org"
</code><br /><br />

En este caso:

<ul>
  <li><code>AUTH_LDAP_CONNECTION_TIMEOUT</code> establece un tiempo m√°ximo de espera (en segundos) para la conexi√≥n LDAP.</li>
  <li><code>AUTH_LDAP_REQUIRE_GROUP</code> obliga a que el usuario pertenezca a un grupo determinado para poder autenticarse en AAP.</li>
</ul>

<strong>Importante:</strong>

<ul>
  <li>AAP no valida ni interpreta estos campos, por lo que cualquier error de formato o valor inv√°lido puede causar fallos en la autenticaci√≥n.</li>
  <li>Se recomienda usar esta opci√≥n √∫nicamente cuando sea necesario aplicar configuraciones avanzadas o extender el comportamiento predeterminado del autenticador LDAP.</li>
  <li>La lista completa de variables adicionales disponibles se puede consultar en la documentaci√≥n oficial de Django Auth LDAP: <br />
  <a href="https://django-auth-ldap.readthedocs.io/en/stable/" target="_blank">https://django-auth-ldap.readthedocs.io/en/stable/</a></li>
</ul>

</details>

<hr />
<details>
  <summary><strong>üìò LDAP Connection Options</strong></summary>

Este campo permite definir opciones adicionales de configuraci√≥n para la conexi√≥n LDAP que establece Ansible Automation Platform (AAP) con el servidor de directorio.<br /><br />

Estas opciones se aplican directamente a la biblioteca python-ldap, que es la capa utilizada por AAP (a trav√©s de Django Auth LDAP) para gestionar las conexiones.  <br /><br />
Se trata, por tanto, de par√°metros de bajo nivel que ajustan el comportamiento de la conexi√≥n y pueden ser √∫tiles para entornos con configuraciones espec√≠ficas de Active Directory o LDAP.<br /><br />

Por defecto, AAP deshabilita las referencias LDAP (<code>OPT_REFERRALS = 0</code>) para evitar bloqueos en ciertas consultas realizadas contra servidores Active Directory.  <br /><br />
Esto es especialmente importante porque las referencias pueden hacer que las operaciones de b√∫squeda queden en espera indefinidamente.<br /><br />

Podemos agregar otras opciones seg√∫n las necesidades de tu entorno, utilizando el formato de clave-valor, donde los nombres de las opciones deben ser cadenas de texto (por ejemplo, <code>"OPT_NETWORK_TIMEOUT"</code>, <code>"OPT_DEBUG_LEVEL"</code>, etc.).  <br /><br />
Ejemplo:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"OPT_REFERRALS": 0,<br />
&nbsp;&nbsp;"OPT_NETWORK_TIMEOUT": 5,<br />
&nbsp;&nbsp;"OPT_DEBUG_LEVEL": 0<br />
}
</code><br /><br />

En este ejemplo:

<ul>
  <li><code>OPT_REFERRALS</code>: <code>0</code> desactiva las referencias LDAP (valor predeterminado).</li>
  <li><code>OPT_NETWORK_TIMEOUT</code>: <code>5</code> establece un tiempo m√°ximo de 5 segundos para las operaciones de red.</li>
  <li><code>OPT_DEBUG_LEVEL</code>: <code>0</code> define el nivel de depuraci√≥n (0 = desactivado).</li>
</ul>

<strong>Se recomienda:</strong>

<ul>
  <li>Utilizar este campo √∫nicamente para ajustar comportamientos espec√≠ficos o resolver problemas de conectividad.</li>
  <li>Los nombres y valores v√°lidos de las opciones disponibles se encuentran en la documentaci√≥n oficial de python-ldap: <br />
  <a href="https://www.python-ldap.org/doc/html/ldap.html#options" target="_blank">https://www.python-ldap.org/doc/html/ldap.html#options</a></li>
  <li>Un valor mal configurado puede causar errores de conexi√≥n o comportamiento inesperado, por lo que se recomienda probar los cambios en un entorno de desarrollo antes de aplicarlos en producci√≥n.</li>
</ul>

</details>
<hr />
<details>
  <summary><strong>üìò LDAP Group Type Parameters</strong></summary>

Este campo permite especificar par√°metros adicionales (en formato clave-valor) que ser√°n enviados al m√©todo de inicializaci√≥n del tipo de grupo definido en el campo LDAP Group Type.<br /><br />

Cada tipo de grupo en LDAP ‚Äîpor ejemplo, <code>ActiveDirectoryGroupType</code>, <code>GroupOfNamesType</code> o <code>PosixGroupType</code>‚Äî puede requerir o admitir opciones espec√≠ficas para adaptar su comportamiento al esquema del servidor de directorio.  <br /><br />
Estas opciones se pasan al inicializador del tipo de grupo elegido y permiten controlar c√≥mo se interpretan los atributos de pertenencia a grupos o c√≥mo se resuelven los miembros.<br /><br />

Por ejemplo, para un entorno Active Directory, podr√≠as especificar:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"name_attr": "cn"<br />
}
</code><br /><br />

O para un servidor OpenLDAP que utiliza el atributo <code>memberUid</code>:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"member_attr": "memberUid"<br />
}
</code><br /><br />

Estos par√°metros le indican al autenticador c√≥mo identificar los grupos y los miembros dentro del √°rbol LDAP seg√∫n el esquema utilizado.

<ul>
  <li>Los nombres y valores de los par√°metros dependen del tipo de grupo seleccionado en LDAP Group Type.</li>
  <li>Si no se requieren configuraciones especiales, este campo puede dejarse vac√≠o.</li>
  <li>La lista completa de par√°metros disponibles y ejemplos de uso puede consultarse en la documentaci√≥n oficial de Django Auth LDAP: <br />
  <a href="https://django-auth-ldap.readthedocs.io/en/stable/groups.html" target="_blank">https://django-auth-ldap.readthedocs.io/en/stable/groups.html</a></li>
</ul>

</details>
<hr />

<details>
  <summary><strong>üìò LDAP Group Search</strong></summary>

Este campo define la b√∫squeda LDAP utilizada para localizar los grupos dentro del directorio.  <br /><br />
En Ansible Automation Platform (AAP), esta configuraci√≥n es fundamental porque permite mapear a los usuarios con las organizaciones, equipos o roles bas√°ndose en su pertenencia a grupos definidos en el servidor LDAP o Active Directory.<br /><br />

A diferencia de la b√∫squeda de usuarios (User Search Base), la b√∫squeda de grupos:

<ul>
  <li>Se utiliza exclusivamente para identificar grupos y sus miembros.</li>
  <li>No admite el uso de <code>LDAPSearchUnion</code>, por lo que solo puede configurarse una √∫nica b√∫squeda LDAP.</li>
</ul>

El formato general de la b√∫squeda es similar al utilizado para usuarios y se compone de tres partes principales:<br /><br />

<code>Base DN, Scope, Filter</code><br /><br />

Por ejemplo:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"base_dn": "OU=Groups,DC=padthai,DC=org",<br />
&nbsp;&nbsp;"scope": "SUBTREE",<br />
&nbsp;&nbsp;"filter": "(objectClass=group)"<br />
}
</code><br /><br />

En este ejemplo:

<ul>
  <li><code>base_dn</code> define el punto de inicio en el √°rbol LDAP desde donde se buscar√°n los grupos.</li>
  <li><code>scope</code> puede ser:
    <ul>
      <li><code>BASE</code> ‚Äî solo el DN exacto especificado.</li>
      <li><code>ONELEVEL</code> ‚Äî solo los objetos directamente bajo el DN base.</li>
      <li><code>SUBTREE</code> ‚Äî todos los objetos dentro del DN base (recomendado).</li>
    </ul>
  </li>
  <li><code>filter</code> especifica el criterio LDAP que determina qu√© objetos se consideran grupos (por ejemplo, <code>objectClass=group</code> en Active Directory o <code>objectClass=groupOfNames</code> en OpenLDAP).</li>
</ul>

<ul>
  <li>Debemos asegurarnos de que el filtro y el √°mbito de b√∫squeda coincidan con la estructura real de grupos en tu directorio.</li>
  <li>En entornos Active Directory, el contenedor predeterminado suele ser <code>CN=Users,DC=padthai,DC=org</code>, pero en configuraciones m√°s organizadas puede usarse una OU espec√≠fica como <code>OU=Groups</code>.</li>
  <li>Este campo trabaja en conjunto con <code>LDAP Group Type</code> y <code>LDAP Group Type Parameters</code> para determinar c√≥mo se interpretan y procesan los resultados de la b√∫squeda de grupos.</li>
</ul>

</details>
<hr />
<details>
  <summary><strong>üìò LDAP User Attribute Map</strong></summary>

Este campo define el mapeo entre los atributos del esquema LDAP y los atributos del modelo de usuario de Ansible Automation Platform (AAP).  <br /><br />
En otras palabras, indica c√≥mo deben traducirse los datos obtenidos del servidor LDAP (como nombre, apellido, correo electr√≥nico, etc.) a los campos correspondientes del usuario dentro de AAP.<br /><br />

Por defecto, los valores de este mapeo est√°n configurados para ser compatibles con Microsoft Active Directory, pero pueden requerir ajustes si se utiliza otro tipo de servidor LDAP (por ejemplo, OpenLDAP o FreeIPA), ya que los nombres de los atributos pueden variar.<br /><br />

Un ejemplo t√≠pico para Active Directory ser√≠a:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"first_name": "givenName",<br />
&nbsp;&nbsp;"last_name": "sn",<br />
&nbsp;&nbsp;"email": "mail"<br />
}
</code><br /><br />

Mientras que en un entorno OpenLDAP, los atributos podr√≠an ser diferentes:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"first_name": "givenName",<br />
&nbsp;&nbsp;"last_name": "surname",<br />
&nbsp;&nbsp;"email": "mail"<br />
}
</code><br /><br />

AAP usa este mapeo al sincronizar usuarios desde el directorio LDAP, garantizando que los datos b√°sicos del usuario (nombre, apellido, correo) se almacenen correctamente en la base de datos interna del sistema.


<ul>
  <li>Si nuestro servidor LDAP utiliza un esquema personalizado, debemos asegurarnos de conocer los nombres exactos de los atributos antes de modificarlos.</li>
  <li>Es posible agregar otros campos compatibles con la API de usuarios de AAP si nuestra organizaci√≥n necesita informaci√≥n adicional (por ejemplo, <code>username</code> o <code>phone_number</code>).</li>
  <li>Consultar la documentaci√≥n de AAP o de Django Auth LDAP para obtener la lista completa de atributos compatibles y ejemplos detallados:  
  <a href="https://django-auth-ldap.readthedocs.io/en/stable/">https://django-auth-ldap.readthedocs.io/en/stable/</a></li>
</ul>

</details>

<hr />

<details>
  <summary><strong>üìò LDAP User Search</strong></summary>

Este campo define la b√∫squeda LDAP utilizada para localizar y autenticar a los usuarios dentro del directorio.  <br /><br />
Cuando un usuario intenta iniciar sesi√≥n en Ansible Automation Platform (AAP), el sistema ejecuta esta b√∫squeda para encontrar la entrada correspondiente en el servidor LDAP y validar sus credenciales.<br /><br />

El resultado de esta b√∫squeda determina qu√© usuarios pueden autenticarse en la plataforma. Solo los usuarios que coincidan con los criterios especificados podr√°n iniciar sesi√≥n y deber√°n estar mapeados a una organizaci√≥n mediante la configuraci√≥n <code>AUTH_LDAP_ORGANIZATION_MAP</code><br /><br />

La b√∫squeda se especifica mediante tres componentes principales:<br /><br />

<code>Base DN, Scope, Filter</code><br /><br />

Por ejemplo:

<br /><br /><code>
{<br />
&nbsp;&nbsp;"base_dn": "OU=Users,DC=padthai,DC=org",<br />
&nbsp;&nbsp;"scope": "SUBTREE",<br />
&nbsp;&nbsp;"filter": "(sAMAccountName=%(user)s)"<br />
}
</code><br /><br />

En este ejemplo:<br /><br />

<ul>
  <li><strong>base_dn</strong>: indica el punto de partida dentro del √°rbol LDAP desde donde se buscar√°n los usuarios (por ejemplo, <strong>OU=Users,DC=padthai,DC=org</strong>).</li>
  <li><strong>scope</strong>: define el alcance de la b√∫squeda:
    <ul>
      <li><strong>BASE</strong>: busca solo en el DN exacto especificado.</li>
      <li><strong>ONELEVEL</strong>: busca solo en el nivel inmediatamente inferior al DN base.</li>
      <li><strong>SUBTREE</strong>: busca en todo el sub√°rbol (recomendado).</li>
    </ul>
  </li>
  <li><strong>filter</strong>: especifica el criterio LDAP utilizado para identificar al usuario.
    <br />En Active Directory, el atributo m√°s com√∫n es <strong>sAMAccountName</strong>, mientras que en OpenLDAP suele usarse <strong>uid</strong>.
  </li>
</ul>


<br /><br />
Si el entorno requiere soportar m√∫ltiples b√∫squedas de usuarios (por ejemplo, cuando los usuarios est√°n distribuidos en diferentes unidades organizativas), se puede utilizar la opci√≥n `LDAPSearchUnion`, que permite combinar varias consultas de b√∫squeda en una sola configuraci√≥n.

<ul>
  <li>Lo mejor es utilizar filtros espec√≠ficos para evitar coincidencias no deseadas y mejorar el rendimiento de las b√∫squedas.</li>
  <li>En entornos Active Directory, <code>(sAMAccountName=%(user)s)</code> es el filtro m√°s habitual.</li>
  <li>En OpenLDAP, el equivalente com√∫n ser√≠a <code>(uid=%(user)s)</code>.</li>
  <li>Debemos assegurarnos de que la b√∫squeda sea coherente con la estructura real del √°rbol de usuarios en nuestra organizaci√≥n.</li>
  <li>La documentaci√≥n completa sobre LDAPSearch y LDAPSearchUnion est√° disponible en:  
  <a href="https://django-auth-ldap.readthedocs.io/en/stable/searches.html">https://django-auth-ldap.readthedocs.io/en/stable/searches.html</a></li>
</ul>

</details>
<hr />
<details>
  <summary><strong>üìò Opciones Generales del Autenticador LDAP</strong></summary>

Esta configuraci√≥n controla c√≥mo se comporta el autenticador LDAP dentro de Ansible Automation Platform (AAP), incluyendo si est√° activo, si puede crear objetos autom√°ticamente y c√≥mo manejar la pertenencia de usuarios a grupos o organizaciones.<br /><br />

<strong>Enabled</strong> <br /><br />
Activa o desactiva el autenticador. Si est√° activado, los usuarios del directorio LDAP o Active Directory podr√°n autenticarse.  <br /><br />
- Activada: el autenticador LDAP valida usuarios.  <br /><br />
- Desactivada: AAP ignora este m√©todo, aunque la configuraci√≥n se mantenga.  
<br /><br />
Mantener desactivada durante pruebas y activarla solo cuando la conexi√≥n y autenticaci√≥n est√©n verificadas.
<br /><br />

<strong>Create Objects </strong><br /><br />
Permite que AAP cree autom√°ticamente usuarios, equipos u organizaciones bas√°ndose en la informaci√≥n obtenida de LDAP.  <br /><br />
- Si un usuario se autentica por primera vez y no existe en AAP, se crear√° autom√°ticamente.  <br /><br />
- Lo mismo aplica para organizaciones o equipos que falten seg√∫n la configuraci√≥n.  
<br /><br />
Habilitar solo si se conf√≠a en la integridad del directorio. En entornos grandes puede generar muchos objetos r√°pidamente.
<br /><br />

<strong>Remove Users</strong> <br /><br />
Controla si al autenticarse un usuario LDAP se eliminan sus pertenencias previas a grupos o equipos asignados desde otras fuentes.  <br /><br />
- Activada: el usuario queda solo en los grupos definidos en LDAP.  <br /><br />
- Desactivada: conserva las asociaciones anteriores.  
<br /><br />
Mantener activada si LDAP es la fuente principal de autoridad. Si se usan m√∫ltiples autenticadores, puede dejarse desactivada para no perder asociaciones externas.

</details>

<hr />

<p>Finalmente, hacemos clic en Create Authentication Method para guardar la configuraci√≥n y crear el m√©todo de autenticaci√≥n. Con esta acci√≥n, se aplicar√°n todos los par√°metros que hemos definido previamente, completando as√≠ el proceso de integraci√≥n.</p>

<p><img src="/assets/images/20251107/20251107-05.png" alt="Texto alternativo" />
<img src="/assets/images/20251107/20251107-06.png" alt="Texto alternativo" /></p>

<p>Despu√©s de toda esta parte te√≥rica, a continuaci√≥n se muestra una tabla con los valores utilizados para la integraci√≥n de mi Active Directory con Ansible Automation Platform en un entorno de laboratorio.</p>

<h3 id="active-directory-authenticator--configuraci√≥n">Active Directory Authenticator ‚Äì Configuraci√≥n</h3>

<p>Esta es la configuraci√≥n que hemos utilizado para esta guia.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Name</th>
      <th style="text-align: left">Active Directory Autenticator</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Type</td>
      <td style="text-align: left">LDAP</td>
    </tr>
    <tr>
      <td style="text-align: left">Authentication Enabled</td>
      <td style="text-align: left">Yes</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Bind DN</td>
      <td style="text-align: left">CN=Administrator,CN=Users,DC=padthai,DC=org</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Bind Password</td>
      <td style="text-align: left">$encrypted$</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Group Type</td>
      <td style="text-align: left">ActiveDirectoryGroupType</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Start TLS</td>
      <td style="text-align: left">Off</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Group Type Parameters</td>
      <td style="text-align: left">name_attr: cn</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP Server URI</td>
      <td style="text-align: left">- ldap://padthai.org:389</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP User Attribute Map</td>
      <td style="text-align: left">email: mail<br />username: sAMAccountName<br />last_name: sn<br />first_name: givenName</td>
    </tr>
    <tr>
      <td style="text-align: left">LDAP User Search</td>
      <td style="text-align: left">- CN=Users,DC=padthai,DC=org<br />- SCOPE_SUBTREE<br />- (sAMAccountName=%(user)s)</td>
    </tr>
  </tbody>
</table>

<p>Una vez completada la creaci√≥n, debemos asegurarnos de que el m√©todo de autenticaci√≥n est√© habilitado. Adem√°s, es posible ordenar los m√©todos seg√∫n su prioridad para definir cu√°l se aplicar√° primero.</p>

<p><img src="/assets/images/20251107/20251107-07.png" alt="Texto alternativo" /></p>

<p>En mi Active Directory tengo un contenedor denominado Users, dentro del cual se encuentra el usuario xavi. Para verificar que Ansible Automation Platform se ha integrado correctamente con el Active Directory, realizaremos una prueba iniciando sesi√≥n con este usuario. En la siguiente imagen se muestra la estructura del √°rbol de mi Active Directory (correspondiente a Windows Server 2019 AD), en el aparece mi usuario.</p>

<p><img src="/assets/images/20251107/20251107-08.png" alt="Texto alternativo" /></p>

<p>Regresamos a la pantalla de inicio de sesi√≥n de Ansible Automation Platform i introducimos nuestras credenciales para verificar que el acceso funciona.</p>

<p><img src="/assets/images/20251107/20251107-09.png" alt="Texto alternativo" /></p>

<p>Si todo funciona correctamente, deber√≠amos poder iniciar sesi√≥n. Es probable que el usuario no disponga de permisos de administrador, por lo que es importante gestionar adecuadamente los niveles de acceso y asignar los privilegios necesarios seg√∫n el rol de cada usuario.</p>

<p><img src="/assets/images/20251107/20251107-10.png" alt="Texto alternativo" /></p>

<p>Con esto finaliza esta gu√≠a sobre la integraci√≥n de Active Directory con Ansible Automation Platform (AAP) a trav√©s de LDAP. Cabe destacar que esta configuraci√≥n est√° pensada para un entorno de pruebas o desarrollo, ya que se ha utilizado LDAP en lugar de LDAPS, que ser√≠a el m√©todo recomendado para entornos de producci√≥n por motivos de seguridad.</p>]]></content><author><name>Xavi Vico Marti</name></author><category term="RedHat" /><category term="ActiveDirectory" /><category term="AAP" /><category term="LDAP" /><category term="LDAPS" /><category term="ActiveDirectory" /><category term="Autenticaci√≥n" /><summary type="html"><![CDATA[Gu√≠a detallada para integrar Red Hat Ansible Automation Platform 2.6 con Active Directory 2019, utilizando autenticaci√≥n LDAP o LDAPS para permitir el acceso de usuarios del dominio.]]></summary></entry><entry><title type="html">Red Hat Enterprise Linux: Integraci√≥n de RHEL 10 con Active Directory 2019 usando SSSD y realmd</title><link href="http://localhost:4000/redhat/activedirectory/RHEL-Integracion-RHEL-10-con-AD/" rel="alternate" type="text/html" title="Red Hat Enterprise Linux: Integraci√≥n de RHEL 10 con Active Directory 2019 usando SSSD y realmd" /><published>2025-10-24T00:00:00+02:00</published><updated>2025-10-24T00:00:00+02:00</updated><id>http://localhost:4000/redhat/activedirectory/RHEL-Integracion-RHEL-10-con-AD</id><content type="html" xml:base="http://localhost:4000/redhat/activedirectory/RHEL-Integracion-RHEL-10-con-AD/"><![CDATA[<h1 id="integraci√≥n-de-rhel-10-con-active-directory-2019-usando-sssd-y-realmd">Integraci√≥n de RHEL 10 con Active Directory 2019 usando SSSD y realmd</h1>

<h2 id="introducci√≥n">Introducci√≥n</h2>

<p>La gesti√≥n centralizada de identidades y accesos es clave. Microsoft Active Directory (AD) se ha consolidado como el est√°ndar en muchas infraestructuras para esta tarea.</p>

<p>En esta gu√≠a, desglosaremos las opciones de integraci√≥n y veremos paso a paso c√≥mo conectar un sistema RHEL a un dominio de Active Directory.</p>

<h2 id="opciones-de-integraci√≥n-cu√°l-elegir">Opciones de Integraci√≥n: ¬øCu√°l elegir?</h2>

<p>Existen varias formas de lograr esta integraci√≥n, cada una con sus particularidades. Aqu√≠ te presentamos las principales:</p>

<h3 id="tabla-de-opciones-de-integraci√≥n">Tabla de opciones de integraci√≥n</h3>

<table>
  <thead>
    <tr>
      <th>Opci√≥n de Integraci√≥n</th>
      <th>Descripci√≥n T√©cnica</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>System Security Services Daemon (SSSD)</strong></td>
      <td>Es el componente de autenticaci√≥n y resoluci√≥n de identidades m√°s moderno y recomendado. Permite a RHEL integrarse de forma nativa con dominios Active Directory utilizando protocolos como Kerberos, LDAP y DNS. Ofrece funcionalidades avanzadas como cach√© de credenciales, resoluci√≥n de grupos y usuarios, mapeo de atributos AD a NSS/PAM, y soporte para autenticaci√≥n offline. SSSD act√∫a como un middleware entre las aplicaciones del sistema y las fuentes externas de identidad, centralizando la gesti√≥n de pol√≠ticas y sesiones.</td>
    </tr>
    <tr>
      <td><strong>Samba Winbind</strong></td>
      <td>Implementaci√≥n basada en Samba que permite a los sistemas Linux funcionar como miembros de un dominio Windows/AD. Utiliza protocolos SMB/CIFS, NTLM y Kerberos, proporcionando resoluci√≥n de usuarios y grupos de dominio a trav√©s de nsswitch y PAM. Aunque es funcional, su arquitectura basada en SMB puede implicar una mayor carga y dependencia del stack de Samba en comparaci√≥n con SSSD.</td>
    </tr>
    <tr>
      <td><strong>Managed Service Account (MSA)</strong></td>
      <td>Una caracter√≠stica de Active Directory que permite crear cuentas de servicio administradas. Dise√±ada para que aplicaciones o demonios espec√≠ficos en RHEL se autentiquen contra AD de forma segura sin requerir la uni√≥n completa del host al dominio. Las MSA gestionan autom√°ticamente la rotaci√≥n de contrase√±as y las pol√≠ticas de autenticaci√≥n mediante Kerberos, reduciendo la sobrecarga administrativa y los riesgos asociados a credenciales est√°ticas. Ideal para servicios, no para login de usuarios interactivos.</td>
    </tr>
  </tbody>
</table>

<p>En esta gu√≠a, nos centraremos en el m√©todo m√°s recomendado y vers√°til para una integraci√≥n profunda: <strong>SSSD</strong>.</p>

<h2 id="descubriendo-sssd">Descubriendo SSSD</h2>

<p>El <strong>System Security Services Daemon (SSSD)</strong> es un servicio esencial en los sistemas Linux/UNIX que act√∫a como intermediario inteligente para la gesti√≥n de identidad y autenticaci√≥n. Su prop√≥sito es conectar tu sistema local (el ‚Äúcliente SSSD‚Äù) a diversas fuentes de identidad y mecanismos de autenticaci√≥n remotos (los ‚Äúproveedores‚Äù).</p>

<p>SSSD opera en dos etapas clave:</p>

<ol>
  <li><strong>Conexi√≥n con el proveedor remoto:</strong> Se comunica con un proveedor remoto (LDAP, AD, Kerberos, IdM) para obtener informaci√≥n de identidad del usuario (UID, GID, etc.) y datos necesarios para autenticaci√≥n.</li>
  <li><strong>Cach√© local de identidad y credenciales:</strong> Crea y mantiene una cach√© local de esta informaci√≥n, permitiendo autenticaci√≥n offline y mejor rendimiento.</li>
</ol>

<p>Gracias a esta arquitectura, los usuarios pueden autenticarse en Linux usando cuentas almacenadas en el proveedor remoto sin crear cuentas locales duplicadas. SSSD puede configurarse para crear directorios de inicio autom√°ticamente.</p>

<h3 id="los-pilares-de-la-autenticaci√≥n-pam-y-nss">Los Pilares de la Autenticaci√≥n: PAM y NSS</h3>

<p>SSSD obtiene la informaci√≥n de identidad desde un servidor remoto y la almacena localmente. ¬øC√≥mo utiliza el sistema operativo esa informaci√≥n?</p>

<h4 id="pam-pluggable-authentication-modules">PAM (Pluggable Authentication Modules)</h4>

<ul>
  <li><strong>Funci√≥n:</strong> Autenticaci√≥n y autorizaci√≥n de usuarios.</li>
  <li><strong>Pregunta clave:</strong> ‚Äú¬øPuede este usuario autenticarse y acceder?‚Äù</li>
</ul>

<h4 id="nss-name-service-switch">NSS (Name Service Switch)</h4>

<ul>
  <li><strong>Funci√≥n:</strong> Define de d√≥nde obtener informaci√≥n sobre usuarios, grupos, hosts, contrase√±as, etc.</li>
  <li><strong>Archivo de configuraci√≥n:</strong> <code class="language-plaintext highlighter-rouge">/etc/nsswitch.conf</code></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd:     files ldap sss
group:      files ldap sss
shadow:     files ldap sss
hosts:      files dns sss
</code></pre></div></div>
<p>Esto significa que, para passwd (usuarios), el sistema primero busca en /etc/passwd (files), luego en un servidor LDAP (ldap), y finalmente consulta a SSSD (sss).</p>

<ul>
  <li><strong>Pregunta clave:</strong> ‚Äú¬øDe d√≥nde obtengo la informaci√≥n de este usuario (UID, GID, nombre)?‚Äù</li>
</ul>

<h4 id="flujo-de-autenticaci√≥n-detallado">Flujo de Autenticaci√≥n Detallado</h4>

<p><img src="/assets/images/20251024/20251024-01.png" alt="Texto alternativo" /></p>

<h3 id="requisitos-y-opciones-de-mapeo-de-ids">Requisitos y Opciones de Mapeo de IDs</h3>

<h4 id="tipos-de-servidores-de-identidad-compatibles-con-sssd">Tipos de Servidores de Identidad Compatibles con SSSD</h4>

<p>SSSD es altamente vers√°til y puede interactuar con diversas fuentes de identidad:</p>

<table>
  <thead>
    <tr>
      <th>Tipo de Servidor</th>
      <th>Descripci√≥n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Active Directory (AD)</strong></td>
      <td>Servicio de directorio de Microsoft que proporciona autenticaci√≥n, autorizaci√≥n y pol√≠ticas centralizadas, el foco de nuestro art√≠culo.</td>
    </tr>
    <tr>
      <td><strong>Identity Management (IdM) en RHEL</strong></td>
      <td>Implementaci√≥n de gesti√≥n de identidades integrada en RHEL basada en FreeIPA, ideal para entornos Linux puros o h√≠bridos compatibles con AD.</td>
    </tr>
    <tr>
      <td><strong>Servidores gen√©ricos LDAP o Kerberos</strong></td>
      <td>Sistemas de directorio o autenticaci√≥n basados en est√°ndares abiertos que proporcionan servicios de identidad sin la complejidad inherente de Active Directory o las caracter√≠sticas de IdM.</td>
    </tr>
  </tbody>
</table>

<h4 id="posix-id-mapping-vs-posix-attributes">POSIX ID Mapping vs. POSIX Attributes</h4>

<p>Cuando integramos Linux con Active Directory, nos enfrentamos a una diferencia fundamental: c√≥mo manejan las identidades los usuarios.</p>

<ul>
  <li>Linux utiliza <strong>UID (User ID)</strong> y <strong>GID (Group ID)</strong>, siguiendo el est√°ndar POSIX.</li>
  <li>Windows AD utiliza <strong>SID (Security ID)</strong>, un identificador √∫nico globalmente.</li>
</ul>

<p>Para que un usuario de Active Directory pueda acceder a un sistema Linux, necesitamos traducir o asignar esos identificadores de Windows (SID) a los de Linux (UID/GID).<br />
Aqu√≠ es donde SSSD ofrece dos opciones principales:</p>

<ol>
  <li><strong>POSIX ID Mapping</strong></li>
  <li><strong>POSIX Attributes</strong></li>
</ol>

<h5 id="posix-id-mapping-mapeo-autom√°tico">POSIX ID Mapping (mapeo autom√°tico)</h5>

<ul>
  <li>Esta es la opci√≥n predeterminada.</li>
  <li>En este modo, SSSD genera autom√°ticamente los <strong>UID</strong> y <strong>GID</strong> a partir del <strong>SID</strong> de cada usuario de AD mediante un algoritmo interno.</li>
  <li>As√≠, no es necesario modificar nada dentro de Active Directory.</li>
</ul>

<h5 id="posix-attributes-atributos-posix-en-ad">POSIX Attributes (atributos POSIX en AD)</h5>

<ul>
  <li>En este modo, los <strong>UID</strong> y <strong>GID</strong> se definen directamente en Active Directory, utilizando los atributos POSIX est√°ndar (como <code class="language-plaintext highlighter-rouge">uidNumber</code>, <code class="language-plaintext highlighter-rouge">gidNumber</code>, <code class="language-plaintext highlighter-rouge">unixHomeDirectory</code>, etc.).</li>
  <li>SSSD simplemente lee esos valores cuando el usuario inicia sesi√≥n.</li>
  <li>Requiere editar o extender el esquema de AD para incluir los atributos POSIX, y la configuraci√≥n es m√°s compleja.</li>
</ul>

<h2 id="demo-integrando-rhel-con-active-directory">¬°Demo! Integrando RHEL con Active Directory</h2>

<p>En esta pr√°ctica, integraremos un sistema <strong>RHEL 10</strong> a un dominio de <strong>Active Directory 2019</strong> utilizando <strong>SSSD</strong> y el m√©todo de <strong>POSIX ID Mapping</strong>.</p>

<p>Utilizaremos un dominio ficticio para fines educativos: <code class="language-plaintext highlighter-rouge">umbrella.corp</code>.</p>

<p>El objetivo es permitir que los usuarios de Active Directory puedan autenticarse directamente en Linux con su nombre de usuario y contrase√±a de AD, sin necesidad de crear cuentas locales en RHEL.<br />
Gracias a SSSD y POSIX ID Mapping, RHEL asignar√° autom√°ticamente los <strong>UID</strong> y <strong>GID</strong> a los usuarios de AD, garantizando una identidad √∫nica dentro del sistema Linux sin modificar Active Directory.</p>

<hr />

<h3 id="informaci√≥n-de-los-sistemas">Informaci√≥n de los Sistemas</h3>

<h4 id="rhel-100">RHEL 10.0</h4>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Hostname</strong></td>
      <td>leon</td>
    </tr>
    <tr>
      <td><strong>IP</strong></td>
      <td>192.168.6.4</td>
    </tr>
    <tr>
      <td><strong>Sistema Operativo</strong></td>
      <td>RHEL 10.0</td>
    </tr>
    <tr>
      <td><strong>Rol</strong></td>
      <td>Servidor Linux a integrar con Active Directory</td>
    </tr>
    <tr>
      <td><strong>Dominio</strong></td>
      <td>umbrella.corp</td>
    </tr>
    <tr>
      <td><strong>DNS Primario</strong></td>
      <td>192.168.6.7</td>
    </tr>
    <tr>
      <td><strong>Estado Integraci√≥n AD</strong></td>
      <td>Pendiente</td>
    </tr>
    <tr>
      <td><strong>Comentarios</strong></td>
      <td>Usar√° SSSD y realmd para unir al dominio</td>
    </tr>
  </tbody>
</table>

<hr />

<h4 id="windows-server-2019-active-directory--dns">Windows Server 2019 (Active Directory / DNS)</h4>

<table>
  <thead>
    <tr>
      <th>Campo</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Hostname</strong></td>
      <td>WIN-TURSKABH596</td>
    </tr>
    <tr>
      <td><strong>IP</strong></td>
      <td>192.168.6.7</td>
    </tr>
    <tr>
      <td><strong>Sistema Operativo</strong></td>
      <td>Windows Server 2019</td>
    </tr>
    <tr>
      <td><strong>Rol</strong></td>
      <td>Controlador de Dominio / DNS</td>
    </tr>
    <tr>
      <td><strong>Dominio</strong></td>
      <td>umbrella.corp</td>
    </tr>
    <tr>
      <td><strong>DNS Primario</strong></td>
      <td>192.168.6.7</td>
    </tr>
    <tr>
      <td><strong>Comentarios</strong></td>
      <td>Servidor principal del dominio, provee DNS interno</td>
    </tr>
  </tbody>
</table>

<hr />

<blockquote>
  <p><strong>Nota:</strong><br />
El controlador de dominio tambi√©n funciona como servidor DNS del dominio.<br />
Esto es importante porque Active Directory depende del DNS para localizar controladores de dominio y otros servicios.<br />
RHEL apunta a este DNS para poder resolver nombres dentro del dominio y autenticar usuarios correctamente.</p>
</blockquote>

<hr />

<h3 id="requisitos-previos">Requisitos previos</h3>

<p>Antes de empezar, hay que asegurarse de que el entorno tiene:</p>

<ul>
  <li><strong>Conectividad de red</strong> Los puertos necesarios para la comunicaci√≥n con AD deben estar abiertos.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Servicio</th>
      <th>Puerto</th>
      <th>Protocolo</th>
      <th>Notas</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>DNS</strong></td>
      <td>53</td>
      <td>UDP y TCP</td>
      <td>‚Äî</td>
    </tr>
    <tr>
      <td><strong>LDAP</strong></td>
      <td>389</td>
      <td>UDP y TCP</td>
      <td>‚Äî</td>
    </tr>
    <tr>
      <td><strong>LDAPS</strong></td>
      <td>636</td>
      <td>TCP</td>
      <td>Opcional</td>
    </tr>
    <tr>
      <td><strong>Samba</strong></td>
      <td>445</td>
      <td>UDP y TCP</td>
      <td>Para los Objetos de Directiva de Grupo (GPO)</td>
    </tr>
    <tr>
      <td><strong>Kerberos</strong></td>
      <td>88</td>
      <td>UDP y TCP</td>
      <td>‚Äî</td>
    </tr>
    <tr>
      <td><strong>Kerberos (kadmin)</strong></td>
      <td>464</td>
      <td>UDP y TCP</td>
      <td>Usado por <em>kadmin</em> para establecer y cambiar contrase√±as</td>
    </tr>
    <tr>
      <td><strong>Cat√°logo Global LDAP</strong></td>
      <td>3268</td>
      <td>TCP</td>
      <td>Si se usa la opci√≥n <code class="language-plaintext highlighter-rouge">id_provider = ad</code></td>
    </tr>
    <tr>
      <td><strong>Cat√°logo Global LDAPS</strong></td>
      <td>3269</td>
      <td>TCP</td>
      <td>Opcional</td>
    </tr>
    <tr>
      <td><strong>NTP</strong></td>
      <td>123</td>
      <td>UDP</td>
      <td>Opcional</td>
    </tr>
    <tr>
      <td><strong>NTP</strong></td>
      <td>323</td>
      <td>UDP</td>
      <td>Opcional</td>
    </tr>
  </tbody>
</table>

<hr />

<ul>
  <li><strong>Configuraci√≥n DNS</strong></li>
</ul>

<p>El servidor DNS de tu RHEL debe apuntar al controlador de dominio de Active Directory.<br />
Puedes verificarlo en <code class="language-plaintext highlighter-rouge">/etc/resolv.conf</code>.</p>

<p><img src="/assets/images/20251024/20251024-02.png" alt="Texto alternativo" />
<img src="/assets/images/20251024/20251024-03.png" alt="Texto alternativo" /></p>

<hr />

<ul>
  <li><strong>Sincronizaci√≥n de hora (NTP)</strong></li>
</ul>

<p>La hora del sistema RHEL debe estar sincronizada con el AD.<br />
Esto es cr√≠tico para el correcto funcionamiento de <strong>Kerberos</strong>.</p>

<p><img src="/assets/images/20251024/20251024-04.png" alt="Texto alternativo" /></p>

<hr />

<h3 id="empecemos-con-la-instalaci√≥n">Empecemos con la instalaci√≥n</h3>

<p>Para empezar, instalamos los paquetes esenciales para la integraci√≥n con Active Directory y el funcionamiento de SSSD:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dnf <span class="nb">install </span>samba-common-tools realmd oddjob oddjob-mkhomedir sssd adcli krb5-workstation
</code></pre></div></div>
<p><img src="/assets/images/20251024/20251024-05.png" alt="Texto alternativo" /></p>

<p>Una vez instalados los paquetes, podemos usar realm discover para verificar la existencia y obtener informaci√≥n sobre nuestro dominio de Active Directory</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>realm discover ad.example.com
</code></pre></div></div>

<p><img src="/assets/images/20251024/20251024-06.png" alt="Texto alternativo" /></p>

<p>Es normal que el configured salga como no antes de unirse al dominio.</p>

<p>Antes de unir RHEL al dominio, es necesario ajustar las pol√≠ticas criptogr√°ficas para soportar algunas configuraciones de Active Directory m√°s antiguas</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>update-crypto-policies <span class="nt">--set</span> DEFAULT:AD-SUPPORT-LEGACY
</code></pre></div></div>

<p><img src="/assets/images/20251024/20251024-07.png" alt="Texto alternativo" /></p>

<p>Se recomienda hacer un reboot para que se apliquen las politicas, es necessario reiniciar los servicios para que se aplique y con el reboot se inician todos de nuevo‚Ä¶</p>

<p>Esto permite que el sistema Linux utilice algoritmos y protocolos de cifrado compatibles con versiones de Active Directory que a√∫n no soportan las pol√≠ticas criptogr√°ficas m√°s estrictas de RHEL 10 por defecto. Si no se aplica este ajuste, el intento de unir el dominio (realm join) puede fallar debido a incompatibilidades de cifrado o autenticaci√≥n.</p>

<p>Ahora, el paso crucial, unir el sistema RHEL al dominio de Active Directory. El comando realm join no solo une el equipo, sino que tambi√©n configura SSSD autom√°ticamente con los par√°metros adecuados. Te pedir√° la contrase√±a de un usuario con permisos para unir equipos al dominio (por ejemplo, el usuario Administrator de AD).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>realm <span class="nb">join </span>ad.example.com <span class="nt">-v</span> 
</code></pre></div></div>
<p><img src="/assets/images/20251024/20251024-08.png" alt="Texto alternativo" />
<img src="/assets/images/20251024/20251024-09.png" alt="Texto alternativo" /></p>

<p>Para comprobar que la integraci√≥n ha sido exitosa y que los usuarios de Active Directory son reconocidos en RHEL, podemos usar el comando getent passwd con un usuario de AD.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>getent passwd administrator@ad.example.com
</code></pre></div></div>
<p><img src="/assets/images/20251024/20251024-10.png" alt="Texto alternativo" /></p>

<p>Ahora RHEL ja est√° integrado con Active Directory. Cualquier usuario de AD puede iniciar sesi√≥n en RHEL utilizando las credenciales de dominio</p>]]></content><author><name>Xavi Vico Marti</name></author><category term="RedHat" /><category term="ActiveDirectory" /><category term="RHEL" /><category term="ActiveDirectory" /><category term="SSSD" /><summary type="html"><![CDATA[Gu√≠a para integrar Red Hat Enterprise Linux 10.0 (RHEL 10) con Active Directory 2019, utilizando las herramientas SSSD y realmd]]></summary></entry><entry><title type="html">Red Hat Ansible Automation Platform 2.5: Gu√≠a de Instalaci√≥n en RHEL 10 (Topolog√≠a Growth Contenerizada)</title><link href="http://localhost:4000/automation/ansible/redhat/AAP-Guia-de-instalacion-2.5/" rel="alternate" type="text/html" title="Red Hat Ansible Automation Platform 2.5: Gu√≠a de Instalaci√≥n en RHEL 10 (Topolog√≠a Growth Contenerizada)" /><published>2025-10-01T00:00:00+02:00</published><updated>2025-10-01T00:00:00+02:00</updated><id>http://localhost:4000/automation/ansible/redhat/AAP-Guia-de%20instalacion-2.5</id><content type="html" xml:base="http://localhost:4000/automation/ansible/redhat/AAP-Guia-de-instalacion-2.5/"><![CDATA[<h2 id="red-hat-ansible-automation-platform-25-tu-gu√≠a-pr√°ctica-de-instalaci√≥n-en-rhel-10-topolog√≠a-growth-contenerizada">Red Hat Ansible Automation Platform 2.5: Tu Gu√≠a Pr√°ctica de Instalaci√≥n en RHEL 10 (Topolog√≠a Growth Contenerizada)</h2>

<h3 id="introducci√≥n">Introducci√≥n</h3>

<p>Esta gu√≠a sirve para ver el proceso de instalaci√≥n de Red Hat Ansible Automation Platform (AAP) 2.5 en un entorno Red Hat Enterprise Linux (RHEL) 10. El objetivo es instalar AAP utilizando una topolog√≠a ‚ÄúGrowth‚Äù contenerizada, lo que significa que todos los componentes se instalar√°n en una √∫nica m√°quina virtual.</p>

<p>Esta configuraci√≥n es perfecta para desarrolladores, para realizar pruebas o para peque√±as implementaciones donde est√°s comenzando a explorar el poder de la automatizaci√≥n con AAP. Adem√°s, lo mejor de esta topolog√≠a es su flexibilidad, se podr√° escalar a una arquitectura ‚ÄúEnterprise‚Äù m√°s compleja, con alta disponibilidad y recursos distribuidos.</p>

<p>En este art√≠culo, revisaremos los requisitos previos del sistema, la configuraci√≥n esencial del entorno y los componentes clave de AAP, para tener una base s√≥lida antes de empezar la instalaci√≥n paso a paso.</p>

<h3 id="entendiendo-ansible-automation-platform-aap">Entendiendo Ansible Automation Platform (AAP)</h3>

<p>Antes de meternos de lleno en los detalles t√©cnicos, es fundamental entender qu√© es exactamente Ansible Automation Platform y por qu√© se ha convertido en una herramienta tan valiosa.</p>

<p>Para situarnos mejor, vamos a entender conceptos:</p>

<ul>
  <li><strong>Ansible</strong>: el motor de automatizaci√≥n, la herramienta base que permite definir y ejecutar tareas en servidores y sistemas.</li>
  <li><strong>AWX</strong>: el proyecto open source que a√±ade una interfaz gr√°fica y servicios b√°sicos para gestionar Ansible de forma m√°s c√≥moda.</li>
  <li><strong>AAP (Ansible Automation Platform)</strong>: la versi√≥n empresarial respaldada por Red Hat, que parte de AWX y lo expande con seguridad, soporte oficial y funcionalidades avanzadas para producci√≥n y grandes organizaciones.</li>
</ul>

<p>Imagina que tienes que realizar la misma tarea repetidamente en decenas, o incluso cientos, de servidores o sistemas. Suena aburrido y un palo‚Ä¶, Ansible naci√≥ para resolver ese problema, permite escribir instrucciones que tus sistemas pueden ejecutar por ti, como, por ejemplo: ‚Äúinstalar un servidor web Apache en todos mis servidores Linux‚Äù. Pues bien, AAP eleva esta capacidad a un nivel empresarial.</p>

<p>Piensa en AAP como la versi√≥n corporativa y robusta de AWX, el proyecto de c√≥digo abierto y gratuito de Ansible. Mientras que AWX es fant√°stico para experimentar y familiarizarte con la interfaz y los conceptos de automatizaci√≥n, AAP a√±ade capas cr√≠ticas de seguridad, un soporte oficial de Red Hat inestimable, y herramientas avanzadas para gestionar entornos de gran escala con total confianza. No se limita a ejecutar comandos; AAP te ayuda a orquestar procesos complejos, centralizar inventarios y credenciales, y facilitar el trabajo en equipo a trav√©s de una interfaz gr√°fica intuitiva.</p>

<p>Muchas organizaciones empiezan con AWX para probar las aguas, pero cuando la automatizaci√≥n se convierte en un pilar fundamental de sus operaciones, necesitan una plataforma estable, respaldada y con funcionalidades avanzadas. Ah√≠ es precisamente donde brilla AAP, incluyendo componentes como Automation Controller, Execution Environments, Automation Mesh, acceso a contenido validado, parches de seguridad y, crucialmente, el soporte oficial de Red Hat.</p>

<h3 id="topolog√≠as-y-m√©todos-de-instalaci√≥n">Topolog√≠as y M√©todos de Instalaci√≥n</h3>

<p>Cuando instalas Ansible Automation Platform, la forma en que decides organizar tu infraestructura se conoce como ‚Äútopolog√≠a‚Äù. Esto define c√≥mo se distribuyen los diferentes componentes de AAP en tus servidores y c√≥mo se interconectan para asegurar un rendimiento √≥ptimo y una operaci√≥n estable.</p>

<p>Red Hat valida y recomienda ciertas topolog√≠as de despliegue para asegurar que la plataforma funcione de manera fiable y con soporte completo:</p>

<ul>
  <li><strong>Topolog√≠a Enterprise</strong>: Dise√±ada para organizaciones grandes o entornos de producci√≥n cr√≠ticos. Se enfoca en alta disponibilidad, m√°ximo rendimiento y escalabilidad para manejar grandes vol√∫menes de usuarios y cargas de trabajo sin interrupciones.</li>
  <li><strong>Topolog√≠a Growth</strong>: Ideal para organizaciones m√°s peque√±as, entornos de desarrollo o con recursos limitados. Permite un despliegue m√°s simple y econ√≥mico al principio, con la flexibilidad de crecer y escalar a medida que tus necesidades evolucionan.</li>
</ul>

<p>Es importante recordar que, si bien puedes instalar AAP en otras configuraciones, Red Hat solo garantiza soporte completo para las topolog√≠as que ellos mismos han probado y publicado. Utilizar una topolog√≠a validada asegura que tu plataforma sea estable y confiable a largo plazo.</p>

<p>Existen tres m√©todos principales para instalar y desplegar Ansible Automation Platform 2.5, dependiendo de tu infraestructura y tus preferencias de gesti√≥n. Para esta gu√≠a, nos centraremos en el m√©todo ‚ÄúContenedores‚Äù y la topolog√≠a ‚ÄúGrowth‚Äù.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">M√©todo</th>
      <th style="text-align: left">Infraestructura</th>
      <th style="text-align: left">Descripci√≥n</th>
      <th style="text-align: left">Topolog√≠as probadas</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">RPM</td>
      <td style="text-align: left">M√°quinas virtuales y servidores f√≠sicos</td>
      <td style="text-align: left">El instalador RPM despliega AAP en Red Hat Enterprise Linux utilizando paquetes RPM. El cliente gestiona el ciclo de vida del producto e infraestructura.</td>
      <td style="text-align: left">RPM growth topology, RPM enterprise topology</td>
    </tr>
    <tr>
      <td style="text-align: left">Contenedores</td>
      <td style="text-align: left">M√°quinas virtuales y servidores f√≠sicos</td>
      <td style="text-align: left">El instalador basado en contenedores utiliza Podman para ejecutar AAP en contenedores sobre RHEL. El cliente gestiona el ciclo de vida del producto e infraestructura.</td>
      <td style="text-align: left">Container growth topology, Container enterprise topology</td>
    </tr>
    <tr>
      <td style="text-align: left">Operator</td>
      <td style="text-align: left">Red Hat OpenShift</td>
      <td style="text-align: left">El operador despliega AAP dentro de OpenShift usando Red Hat OpenShift Operators. El cliente gestiona el ciclo de vida del producto e infraestructura.</td>
      <td style="text-align: left">Operator growth topology, Operator enterprise topology</td>
    </tr>
  </tbody>
</table>

<h3 id="componentes">Componentes</h3>

<p>Para armar el ‚Äúrompecabezas‚Äù de Ansible Automation Platform, es crucial conocer las piezas que lo componen. AAP no es solo una herramienta, sino un ecosistema de servicios interconectados que trabajan juntos para potenciar tu automatizaci√≥n.</p>

<p>Los componentes m√°s importantes que debemos conocer, bas√°ndome en la documentaci√≥n oficial de Red Hat:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Componente</th>
      <th style="text-align: left">Descripci√≥n</th>
      <th style="text-align: left">¬øPor qu√© importa?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Platform Gateway</td>
      <td style="text-align: left">La puerta de entrada a AAP. Maneja autenticaci√≥n, permisos y guarda un registro de cambios (activity stream).</td>
      <td style="text-align: left">Te logueas una sola vez y accedes a todo. Adem√°s, tienes trazabilidad de lo que pasa.</td>
    </tr>
    <tr>
      <td style="text-align: left">Automation Controller</td>
      <td style="text-align: left">El cerebro de la plataforma. Define, ejecuta y escala automatizaciones.</td>
      <td style="text-align: left">Permite orquestar playbooks desde lo simple hasta lo empresarial.</td>
    </tr>
    <tr>
      <td style="text-align: left">Automation Hub</td>
      <td style="text-align: left">El ‚Äúmercado central‚Äù de colecciones certificadas por Red Hat y partners.</td>
      <td style="text-align: left">Usas contenido probado y soportado, sin reinventar la rueda.</td>
    </tr>
    <tr>
      <td style="text-align: left">Private Automation Hub</td>
      <td style="text-align: left">Tu propio hub privado y desconectado. Sincroniza contenido y guarda colecciones personalizadas.</td>
      <td style="text-align: left">Ideal para entornos on-premise o integrados con CI/CD.</td>
    </tr>
    <tr>
      <td style="text-align: left">High Availability Hub</td>
      <td style="text-align: left">Una versi√≥n redundante y escalable del hub con m√∫ltiples nodos.</td>
      <td style="text-align: left">Alta disponibilidad = menos ca√≠das y m√°s tranquilidad.</td>
    </tr>
    <tr>
      <td style="text-align: left">Event-Driven Ansible Controller</td>
      <td style="text-align: left">Automatizaci√≥n reactiva: escucha eventos y ejecuta acciones con rulebooks.</td>
      <td style="text-align: left">Aumenta la agilidad y automatiza decisiones en tiempo real.</td>
    </tr>
    <tr>
      <td style="text-align: left">Automation Mesh</td>
      <td style="text-align: left">Una red de nodos distribuida que reparte la carga de trabajo.</td>
      <td style="text-align: left">Escalabilidad, resiliencia y flexibilidad en entornos grandes o dispersos.</td>
    </tr>
    <tr>
      <td style="text-align: left">Execution Environments</td>
      <td style="text-align: left">Contenedores donde se ejecutan los playbooks. Incluyen motor + m√≥dulos.</td>
      <td style="text-align: left">Portabilidad y consistencia: ‚Äúsi funciona aqu√≠, funciona en todos lados‚Äù.</td>
    </tr>
    <tr>
      <td style="text-align: left">Ansible Galaxy</td>
      <td style="text-align: left">Comunidad para compartir roles y colecciones.</td>
      <td style="text-align: left">Reutilizas contenido y aceleras tus proyectos.</td>
    </tr>
    <tr>
      <td style="text-align: left">Content Navigator</td>
      <td style="text-align: left">Interfaz de texto (TUI) y CLI principal para construir y ejecutar automatizaciones.</td>
      <td style="text-align: left">Tu navaja suiza en la terminal, base de futuros IDEs.</td>
    </tr>
    <tr>
      <td style="text-align: left">PostgreSQL</td>
      <td style="text-align: left">Base de datos relacional donde se guarda todo: inventarios, credenciales, historial.</td>
      <td style="text-align: left">La memoria de la plataforma.</td>
    </tr>
  </tbody>
</table>

<h3 id="detalles-t√©cnicos">Detalles T√©cnicos</h3>

<p>Esta secci√≥n se enfoca en los requisitos validados por Red Hat para una instalaci√≥n ‚ÄúGrowth‚Äù contenerizada. Aqu√≠ muestro el dise√±o y las especificaciones para desplegar AAP en una √∫nica m√°quina virtual, de forma clara y sencilla.</p>

<h4 id="virtual-machine-requirements">Virtual machine requirements</h4>

<p>Estos son los requisitos m√≠nimos de hardware para tu VM de RHEL 10 en una topolog√≠a ‚ÄúGrowth‚Äù:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Requirement</th>
      <th style="text-align: left">Minimum requirement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">RAM</td>
      <td style="text-align: left">16 GB</td>
    </tr>
    <tr>
      <td style="text-align: left">CPUs</td>
      <td style="text-align: left">4</td>
    </tr>
    <tr>
      <td style="text-align: left">Local disk</td>
      <td style="text-align: left">Total available disk space: 60 GB<br />Installation directory: 15 GB (if on a dedicated partition)<br />/var/tmp for online installations: 1 GB<br />/var/tmp for offline or bundled installations: 3 GB<br />Temporary directory (defaults to /tmp) for offline or bundled installations: 10GB</td>
    </tr>
    <tr>
      <td style="text-align: left">Disk IOPS</td>
      <td style="text-align: left">3000</td>
    </tr>
  </tbody>
</table>

<h4 id="system-configuration">System configuration</h4>

<p>Estos son los aspectos clave que tu sistema RHEL 10 debe cumplir. Atenci√≥n a la suscripci√≥n, ya que es un paso que a menudo se pasa por alto y puede causar problemas:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Tipo</th>
      <th style="text-align: left">Descripci√≥n</th>
      <th style="text-align: left">Notas</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Suscripci√≥n</td>
      <td style="text-align: left">Suscripci√≥n v√°lida de Red Hat Ansible Automation Platform<br />Suscripci√≥n v√°lida de Red Hat Enterprise Linux (para poder usar los repositorios BaseOS y AppStream)</td>
      <td style="text-align: left">¬†</td>
    </tr>
    <tr>
      <td style="text-align: left">Sistema operativo</td>
      <td style="text-align: left">Red Hat Enterprise Linux 9.2 o versiones posteriores de Red Hat Enterprise Linux 9.<br />Red Hat Enterprise Linux 10 o versiones posteriores de Red Hat Enterprise Linux 10.</td>
      <td style="text-align: left">‚Äî</td>
    </tr>
    <tr>
      <td style="text-align: left">Arquitectura de CPU</td>
      <td style="text-align: left">x86_64, AArch64, s390x (IBM Z), ppc64le (IBM Power)</td>
      <td style="text-align: left">‚Äî</td>
    </tr>
    <tr>
      <td style="text-align: left">ansible-core</td>
      <td style="text-align: left">RHEL 9: el programa de instalaci√≥n usa <code class="language-plaintext highlighter-rouge">ansible-core</code> 2.14; la operaci√≥n de Ansible Automation Platform usa <code class="language-plaintext highlighter-rouge">ansible-core</code> 2.16.<br />RHEL 10: el programa de instalaci√≥n y la operaci√≥n de Ansible Automation Platform usan <code class="language-plaintext highlighter-rouge">ansible-core</code> 2.16.</td>
      <td style="text-align: left">El programa de instalaci√≥n utiliza el paquete <code class="language-plaintext highlighter-rouge">ansible-core</code> del repositorio AppStream de RHEL. Ansible Automation Platform incluye <code class="language-plaintext highlighter-rouge">ansible-core</code> 2.16 para su operaci√≥n, por lo que no es necesario instalarlo manualmente.</td>
    </tr>
    <tr>
      <td style="text-align: left">Navegador</td>
      <td style="text-align: left">Una versi√≥n actualmente soportada de Mozilla Firefox o Google Chrome</td>
      <td style="text-align: left">‚Äî</td>
    </tr>
    <tr>
      <td style="text-align: left">Base de datos</td>
      <td style="text-align: left">PostgreSQL 15</td>
      <td style="text-align: left">Las bases de datos externas (soporte por el cliente) requieren soporte ICU.</td>
    </tr>
  </tbody>
</table>

<h4 id="network-ports-and-protocols">Network ports and protocols</h4>

<p>A continuaci√≥n, se listan los puertos de red y protocolos que AAP utiliza para la comunicaci√≥n entre sus componentes. Es crucial que estos puertos est√©n abiertos en el firewall para asegurar la correcta operaci√≥n de la plataforma:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Port number</th>
      <th style="text-align: left">Protocol</th>
      <th style="text-align: left">Service</th>
      <th style="text-align: left">Source</th>
      <th style="text-align: left">Destination</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Event-Driven Ansible</td>
      <td style="text-align: left">Automation hub</td>
    </tr>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Event-Driven Ansible</td>
      <td style="text-align: left">Automation controller</td>
    </tr>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Automation controller</td>
      <td style="text-align: left">Automation hub</td>
    </tr>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">Automation controller</td>
    </tr>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">Automation hub</td>
    </tr>
    <tr>
      <td style="text-align: left">80/443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTP/HTTPS</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">Event-Driven Ansible</td>
    </tr>
    <tr>
      <td style="text-align: left">5432</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">PostgreSQL</td>
      <td style="text-align: left">Event-Driven Ansible</td>
      <td style="text-align: left">External database</td>
    </tr>
    <tr>
      <td style="text-align: left">5432</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">PostgreSQL</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">External database</td>
    </tr>
    <tr>
      <td style="text-align: left">5432</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">PostgreSQL</td>
      <td style="text-align: left">Automation hub</td>
      <td style="text-align: left">External database</td>
    </tr>
    <tr>
      <td style="text-align: left">5432</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">PostgreSQL</td>
      <td style="text-align: left">Automation controller</td>
      <td style="text-align: left">External database</td>
    </tr>
    <tr>
      <td style="text-align: left">6379</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">Redis</td>
      <td style="text-align: left">Event-Driven Ansible</td>
      <td style="text-align: left">Redis container</td>
    </tr>
    <tr>
      <td style="text-align: left">6379</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">Redis</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">Redis container</td>
    </tr>
    <tr>
      <td style="text-align: left">8443</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">HTTPS</td>
      <td style="text-align: left">Platform gateway</td>
      <td style="text-align: left">Platform gateway</td>
    </tr>
    <tr>
      <td style="text-align: left">27199</td>
      <td style="text-align: left">TCP</td>
      <td style="text-align: left">Receptor</td>
      <td style="text-align: left">Automation controller</td>
      <td style="text-align: left">Execution container</td>
    </tr>
  </tbody>
</table>

<h3 id="practica---instalaci√≥n-de-ansible-automation-platform">PRACTICA - Instalaci√≥n de Ansible Automation Platform</h3>

<p>La instalaci√≥n de Ansible Automation Platform requiere una serie de pasos preparatorios para asegurar un despliegue sin problemas. Nos centraremos en una instalaci√≥n ‚ÄúGrowth‚Äù contenerizada en RHEL 10.</p>

<h4 id="preparaci√≥n-del-sistema-operativo">Preparaci√≥n del Sistema Operativo</h4>

<p><strong>Configuraci√≥n del Usuario y Privilegios Sudo</strong></p>

<p>Para la instalaci√≥n, el usuario que ejecuta el instalador debe tener permisos para elevar privilegios a root sin necesidad de introducir una contrase√±a. Esto es fundamental, ya que muchos pasos del proceso requieren modificar servicios, paquetes y configuraciones cr√≠ticas del sistema.</p>

<p>Para configurar esto, editamos el archivo <code class="language-plaintext highlighter-rouge">sudoers</code> (lo recomendado es crear un archivo nuevo en /etc/sudoers.d/user, esto es un ejemplo) y a√±adir una l√≠nea similar a la siguiente, sustituyendo <code class="language-plaintext highlighter-rouge">user</code> por el nombre de tu usuario:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> NOPASSWD: ALL
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP01.png" alt="Texto alternativo" /></p>

<p>Esto permite a <code class="language-plaintext highlighter-rouge">user</code> ejecutar comandos como <code class="language-plaintext highlighter-rouge">root</code> con <code class="language-plaintext highlighter-rouge">sudo</code> sin pedir contrase√±a.</p>

<p><strong>Verificaci√≥n del Nombre de Host (FQDN)</strong></p>

<p>Es crucial que el nombre de host del servidor est√© configurado como un Nombre de Dominio Completamente Cualificado (FQDN). Esto asegura una comunicaci√≥n adecuada entre los servicios de AAP.</p>

<p>Podemos verificarlo con el siguiente comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">hostname</span> <span class="nt">-f</span>
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP02.png" alt="Texto alternativo" /></p>

<p>Si no devuelve un FQDN, debemos configurarlo en nuestro sistema RHEL.</p>

<p><strong>Gesti√≥n de Suscripciones y Repositorios</strong></p>

<p>Para acceder a los paquetes y contenedores de Red Hat, el servidor RHEL debe estar correctamente suscrito y los repositorios necesarios deben estar habilitados.</p>

<p>Nos aseguramos de que el sistema est√° suscrito a Red Hat y que tiene acceso a los repositorios <code class="language-plaintext highlighter-rouge">BaseOS</code> y <code class="language-plaintext highlighter-rouge">AppStream</code>. Podemos comprobar el estado de la suscripci√≥n con:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>subscription-manager status
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP03.png" alt="Texto alternativo" /></p>

<p>Si no est√° suscrito, podemos registrarlo con:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>subscription-manager register
</code></pre></div></div>

<p>Es necesario que los repositorios de <code class="language-plaintext highlighter-rouge">AppStream</code> y <code class="language-plaintext highlighter-rouge">BaseOS</code> est√©n habilitados, para ello verificamos que los tenemos activos.
Aqu√≠ tenemos una imagen que muestra c√≥mo verificar los repositorios activos:</p>

<p><img src="/assets/images/AAPInstallguide/AAP04.png" alt="Texto alternativo" /></p>

<p>Siguiente paso, instalamos el paquete <code class="language-plaintext highlighter-rouge">ansible-core</code>, que el instalador de AAP utilizar√°.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dnf <span class="nb">install </span>ansible-core <span class="nt">-y</span>
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP05.png" alt="Texto alternativo" /></p>

<p>Y opcionalmente podemos instalar los paquetes <code class="language-plaintext highlighter-rouge">wget</code>, <code class="language-plaintext highlighter-rouge">git-core</code>, <code class="language-plaintext highlighter-rouge">rsync</code> y <code class="language-plaintext highlighter-rouge">vim</code> que nos pueden ser √∫tiles durante la instalaci√≥n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dnf <span class="nb">install </span>wget git-core rsync vim <span class="nt">-y</span>
</code></pre></div></div>

<h4 id="descarga-del-instalador-de-ansible-automation-platform">Descarga del Instalador de Ansible Automation Platform</h4>

<p>Visitamos el portal de descargas de Ansible Automation Platform. Desde all√≠ es posible obtener las versiones m√°s recientes del instalador.</p>

<p>Existen dos modalidades principales de instalaci√≥n:</p>

<ul>
  <li><strong>Instalaci√≥n Online</strong>: Selecciona la opci√≥n ‚ÄúAnsible Automation Platform 2.5 Containerized Setup‚Äù. En este caso, durante el proceso de instalaci√≥n, el instalador descargar√° los contenedores necesarios directamente desde los repositorios de Red Hat.</li>
  <li><strong>Instalaci√≥n Offline (paquete completo)</strong>: Selecciona la opci√≥n ‚ÄúAnsible Automation Platform 2.5 Containerized Setup Bundle‚Äù. Este paquete incluye todos los artefactos requeridos para entornos aislados de Internet o con restricciones de red.</li>
</ul>

<p>Nosotros para esta gu√≠a elegiremos la online, una vez elegida la modalidad, descargamos el archivo <code class="language-plaintext highlighter-rouge">.tar.gz</code> correspondiente a la versi√≥n y arquitectura del sistema.</p>

<p>Aqu√≠ tenemos una imagen que ilustra la descarga desde el portal:</p>

<p><img src="/assets/images/AAPInstallguide/AAP06.png" alt="Texto alternativo" /></p>

<p>Los archivos descargados deben copiarse a la m√°quina donde se realizar√° la instalaci√≥n. Esto suele hacerse desde la estaci√≥n de administraci√≥n hacia el servidor RHEL destino.</p>

<p>La forma m√°s segura de realizar esta transferencia es mediante SCP (Secure Copy Protocol).</p>

<p>En el servidor RHEL, tendremos que definir un directorio que servir√° como punto de instalaci√≥n.</p>

<p>Requisito importante: debemos asegurarnos de contar con al menos 15 GB de espacio libre en el directorio seleccionado, ya que la instalaci√≥n inicial genera m√∫ltiples contenedores y datos temporales.</p>

<p>En este caso utilizaremos <code class="language-plaintext highlighter-rouge">/home/user/demos</code> para descomprimir el archivo tar:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> /home/user/demos
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">df</span> <span class="nt">-h</span> /home/user/demos
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP07.png" alt="Texto alternativo" /></p>

<p>Con los archivos ya presentes en el servidor, vamos a descomprimir el instalador en el directorio <code class="language-plaintext highlighter-rouge">demos</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xvzf</span> ansible-automation-platform-setup-2.5-containerized-tar.gz <span class="nt">-C</span> /home/user/demos
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP08.png" alt="Texto alternativo" /></p>

<p>Al finalizar, se crear√° un directorio con todos los archivos y scripts necesarios para continuar con el despliegue de la plataforma.</p>

<h4 id="configuraci√≥n-del-archivo-de-inventario">Configuraci√≥n del Archivo de Inventario</h4>

<p><img src="/assets/images/AAPInstallguide/AAP09.png" alt="Texto alternativo" /></p>

<p>Cuando instalamos Ansible Automation Platform (AAP), todo gira en torno a un archivo llamado <code class="language-plaintext highlighter-rouge">inventory</code>. Este archivo es como el ‚Äúmapa‚Äù que le dice al instalador qu√© componentes debe desplegar, en qu√© servidores y con qu√© configuraciones.</p>

<p>Sin este archivo, el instalador no sabe qu√© hacer, as√≠ que aqu√≠ te explico c√≥mo funciona y c√≥mo puedes adaptarlo a tu entorno.</p>

<p>Dentro del paquete de instalaci√≥n que hemos descargado vienen ejemplos de inventario:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">inventory</code>: pensado para instalaciones enterprise (distribuidas, con varios nodos).</li>
  <li><code class="language-plaintext highlighter-rouge">inventory-growth</code>: pensado para instalaciones all-in-one (todo en un mismo servidor).</li>
</ul>

<p><img src="/assets/images/AAPInstallguide/AAP10.png" alt="Texto alternativo" /></p>

<p>La topolog√≠a que queremos implementar es la growth, vamos a modificar el <code class="language-plaintext highlighter-rouge">inventory-growth</code> para que se ajuste a nuestra configuraci√≥n.</p>

<p>Para ello abrimos el archivo y a√±adimos nuestro <code class="language-plaintext highlighter-rouge">fqdn</code> y credenciales de Red Hat en los campos necesarios. El archivo se ver√° similar a este:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This is the AAP installer inventory file intended for the Container growth deployment topology.  </span>
<span class="c1"># This inventory file expects to be run from the host where AAP will be installed.  </span>
<span class="c1"># Please consult the Ansible Automation Platform product documentation about this topology's tested hardware configuration.  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/tested_deployment_models/container-topologies  </span>
<span class="c1">#  </span>
<span class="c1"># Please consult the docs if you're unsure what to add  </span>
<span class="c1"># For all optional variables please consult the included README.md  </span>
<span class="c1"># or the Ansible Automation Platform documentation:  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation  </span>
 
<span class="c1"># This section is for your AAP Gateway host(s)  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="pi">[</span><span class="nv">automationgateway</span><span class="pi">]</span>  
<span class="s">your.fqdn.here</span>  
 
<span class="c1"># This section is for your AAP Controller host(s)  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="pi">[</span><span class="nv">automationcontroller</span><span class="pi">]</span>  
<span class="s">your.fqdn.here</span>  
 
<span class="c1"># This section is for your AAP Automation Hub host(s)  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="pi">[</span><span class="nv">automationhub</span><span class="pi">]</span>  
<span class="s">your.fqdn.here</span>  
 
<span class="c1"># This section is for your AAP EDA Controller host(s)  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="pi">[</span><span class="nv">automationeda</span><span class="pi">]</span>  
<span class="s">your.fqdn.here</span>  
 
<span class="c1"># This section is for the AAP database  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="pi">[</span><span class="nv">database</span><span class="pi">]</span>  
<span class="s">your.fqdn.here</span>  
 
<span class="pi">[</span><span class="nv">all</span><span class="pi">:</span><span class="nv">vars</span><span class="pi">]</span>  
<span class="c1"># Ansible  </span>
<span class="s">ansible_connection=local</span>  
 
<span class="c1"># Common variables  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation/appendix-inventory-files-vars#ref-general-inventory-variables  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="s">postgresql_admin_username=postgres</span>  
<span class="s">postgresql_admin_password=your_postgresql_admin_password</span>  
 
<span class="s">registry_username=your_rhn_username</span>  
<span class="s">registry_password=your_rhn_password</span>  
 
<span class="s">redis_mode=standalone</span>  
 
<span class="c1"># AAP Gateway  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation/appendix-inventory-files-vars#ref-gateway-variables  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="s">gateway_admin_password=your_gateway_admin_password</span>  
<span class="s">gateway_pg_host=your.fqdn.here</span>  
<span class="s">gateway_pg_password=your_gateway_pg_password</span>  
 
<span class="c1"># AAP Controller  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation/appendix-inventory-files-vars#ref-controller-variables  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="s">controller_admin_password=your_controller_admin_password</span>  
<span class="s">controller_pg_host=your.fqdn.here</span>  
<span class="s">controller_pg_password=your_controller_pg_password</span>  
<span class="s">controller_percent_memory_capacity=0.5</span>  
 
<span class="c1"># AAP Automation Hub  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation/appendix-inventory-files-vars#ref-hub-variables  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="s">hub_admin_password=your_hub_admin_password</span>  
<span class="s">hub_pg_host=your.fqdn.here</span>  
<span class="s">hub_pg_password=your_hub_pg_password</span>  
<span class="s">hub_seed_collections=false</span>  
 
<span class="c1"># AAP EDA Controller  </span>
<span class="c1"># https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/2.5/html/containerized_installation/appendix-inventory-files-vars#event-driven-ansible-controller  </span>
<span class="c1"># -----------------------------------------------------  </span>
<span class="s">eda_admin_password=your_eda_admin_password</span>  
<span class="s">eda_pg_host=your.fqdn.here</span>  
<span class="s">eda_pg_password=your_eda_pg_password</span> 
</code></pre></div></div>

<p>Sustituimos <code class="language-plaintext highlighter-rouge">your.fqdn.here</code> por el <code class="language-plaintext highlighter-rouge">fqdn</code> de nuestra instancia donde instalaremos el Ansible Automation Platform.</p>

<p>Modificamos el <code class="language-plaintext highlighter-rouge">&lt;set your own&gt;</code> por las contrase√±as que queramos para nuestro usuario admin en cada componente que se indica en el inventario.</p>

<p>Y en los campos <code class="language-plaintext highlighter-rouge">registry_username=your_rhn_username</code> y <code class="language-plaintext highlighter-rouge">registry_password=your_rhn_password</code> indicamos nuestro usuario y contrase√±a de la cuenta de Red Hat.</p>

<p>Una vez lo tenemos todo listo podemos lanzar el instalador y indicar el archivo de inventario correspondiente (opci√≥n <code class="language-plaintext highlighter-rouge">-i</code>). Nos tenemos que assegurar de estar en el directorio donde descomprimimos el instalador (e.g., <code class="language-plaintext highlighter-rouge">/home/user/demos/ansible-automation-platform-containerized-setup-2.5-19</code>).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /home/user/demos/ansible-automation-platform-containerized-setup-2.5-19
ansible-playbook <span class="nt">-i</span> inventory-growth ansible.containerized_installer.install
</code></pre></div></div>
<p><img src="/assets/images/AAPInstallguide/AAP11.png" alt="Texto alternativo" />
<img src="/assets/images/AAPInstallguide/AAP12.png" alt="Texto alternativo" /></p>

<p>Cuando finalice la instalaci√≥n de Ansible Automation Platform (AAP), el siguiente paso es comprobar que la interfaz web est√© disponible.</p>

<p>De manera predeterminada, podemos acceder escribiendo en el navegador:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://&lt;gateway_node&gt;:443
</code></pre></div></div>

<p>Aqu√≠ reemplazar <code class="language-plaintext highlighter-rouge">&lt;gateway_node&gt;</code> por el nombre o la direcci√≥n IP del servidor donde desplegamos el Automation Gateway.</p>

<p>Para entrar al panel, utilizar el usuario admin (<code class="language-plaintext highlighter-rouge">gateway_admin_username</code>) y la contrase√±a que definiste en la instalaci√≥n (<code class="language-plaintext highlighter-rouge">gateway_admin_password</code>).</p>

<p>Aqu√≠ tenemos una captura de pantalla de la pantalla de inicio de sesi√≥n de AAP:
<img src="/assets/images/AAPInstallguide/AAP13.png" alt="Texto alternativo" /></p>

<p>Para habilitar el soporte completo y recibir actualizaciones, debemos activar la suscripci√≥n de Ansible Automation Platform. Dentro de la interfaz web, nos dirigimos a la secci√≥n de administraci√≥n de suscripciones e introducimos nuestras credenciales de acceso de Red Hat (Client ID y Client Secret).</p>

<p><img src="/assets/images/AAPInstallguide/AAP14.png" alt="Texto alternativo" /></p>

<p>Finalmente, ya accedemos, ahora podemos empezar a explorar todas las capacidades de automatizaci√≥n que ofrece Ansible Automation Platform.</p>

<p><img src="/assets/images/AAPInstallguide/AAP15.png" alt="Texto alternativo" /></p>

<p>Mi idea con este art√≠culo era desmitificar el proceso, compartir esa ‚Äúreceta‚Äù que a m√≠ me ha funcionado bien para arrancar r√°pido con una topolog√≠a ‚ÄúGrowth‚Äù. Podemos pensar en ella como un campo de pruebas personal, donde podemos cacharrear, aprender y, lo m√°s importante, empezar a ver lo que ofrece AAP sin el estr√©s de una configuraci√≥n gigante y con una gran flexibilidad para crecer cuando nosotros queramos.</p>]]></content><author><name>Xavi Vico Marti</name></author><category term="Automation" /><category term="Ansible" /><category term="RedHat" /><category term="AAP" /><category term="AnsibleAutomationPlatform" /><category term="RHEL" /><category term="InstallationGuide" /><category term="Containerized" /><summary type="html"><![CDATA[Instalaci√≥n de Red Hat Ansible Automation Platform 2.5 en RHEL 10. Gu√≠a para configurar una topolog√≠a 'Growth' contenerizada, ideal para desarrollo y pruebas.]]></summary></entry><entry><title type="html">Seguridad Empresarial con Red Hat: M√°s All√° del C√≥digo Abierto</title><link href="http://localhost:4000/seguridad/red%20hat/open%20source/Seguridad-empresarial-con-red-hat/" rel="alternate" type="text/html" title="Seguridad Empresarial con Red Hat: M√°s All√° del C√≥digo Abierto" /><published>2025-09-15T00:00:00+02:00</published><updated>2025-09-15T00:00:00+02:00</updated><id>http://localhost:4000/seguridad/red%20hat/open%20source/Seguridad-empresarial-con-red-hat</id><content type="html" xml:base="http://localhost:4000/seguridad/red%20hat/open%20source/Seguridad-empresarial-con-red-hat/"><![CDATA[<h2 id="el-paradigma-de-la-seguridad-en-el-open-source">El Paradigma de la Seguridad en el Open Source</h2>

<p>El software de c√≥digo abierto se ha convertido en una pieza clave para impulsar la innovaci√≥n tecnol√≥gica. Su esencia est√° en la colaboraci√≥n y la transparencia, lo que ha permitido avances extraordinarios, pero aqu√≠ es donde aparece lo que podr√≠amos llamar el dilema del c√≥digo abierto. Aunque este modelo colaborativo es su mayor fortaleza, tambi√©n plantea desaf√≠os cuando se trata de adoptarlo a nivel empresarial. No es el c√≥digo en s√≠ el problema, sino c√≥mo las organizaciones entienden y, sobre todo, c√≥mo gestionan su seguridad y los riesgos asociados.</p>

<p>El panorama de las vulnerabilidades ha cambiado radicalmente en las √∫ltimas d√©cadas. Cuando naci√≥ el programa Common Vulnerabilities and Exposures (CVE) hace 25 a√±os, se registraron 894 vulnerabilidades de seguridad en su primer a√±o, estamos hablando de 1999. En 2024, esa cifra super√≥ las 40,000. Este crecimiento exponencial ha dejado obsoleta la vieja estrategia de ‚Äòparchearlo todo‚Äô, ya no es viable ni inteligente tratar todas las vulnerabilidades por igual. No todos los fallos representan el mismo nivel de riesgo, y centrarse en corregirlos todos sin priorizar ignora un punto clave, si realmente est√°n siendo explotados o no. De hecho, los datos muestran que hist√≥ricamente menos del 0.5% de las vulnerabilidades llegan a ser explotadas activamente.</p>

<p><img src="/assets/images/SERH1.png" alt="Texto alternativo" /></p>

<p>Aqu√≠ es donde la transparencia del c√≥digo abierto puede jugar en contra, al ser p√∫blicos por naturaleza, los proyectos open source tienden a reportar y documentar una gran cantidad de fallos, incluso los de impacto bajo o moderado, en cambio, muchos proveedores de software propietario no revelan este tipo de vulnerabilidades menores, lo que crea una ilusi√≥n de mayor seguridad y un panorama de riesgo mucho m√°s opaco.</p>

<p>Esto da lugar a un doble est√°ndar, las pol√≠ticas que exigen ‚ÄúZero Known Vulnerabilities‚Äù terminan castigando al c√≥digo abierto por ser m√°s transparente, en lugar de enfocarse en lo que realmente importa, el riesgo real. Red Hat Product Security Risk Report 2024 lo deja claro. Aunque en 2024 aument√≥ notablemente el n√∫mero de CVEs asignados a productos de Red Hat en parte porque el kernel de Linux empez√≥ a funcionar como autoridad oficial para registrar fallos (CNA), el riesgo real detr√°s de esos n√∫meros no cambi√≥ mucho, la mayor√≠a de esas nuevas vulnerabilidades eran de bajo o moderado impacto, lo que refuerza una idea clave, necesitamos evaluar el riesgo con criterio, no simplemente contar vulnerabilidades.</p>

<p>El caso de XZ Backdoor, tambi√©n abordado en el informe, fue una verdadera llamada de atenci√≥n a nivel global sobre lo sofisticados que se han vuelto los ataques a la cadena de suministro de software (SSCA). Un atacante logr√≥ infiltrarse durante casi dos a√±os, gan√°ndose la confianza de la comunidad, hasta que finalmente introdujo c√≥digo malicioso con el potencial de comprometer una enorme cantidad de sistemas.</p>

<p>Este incidente puso en evidencia lo cr√≠tica que es la seguridad en la cadena de suministro. Pero tambi√©n dej√≥ algo muy claro, el modelo de c√≥digo abierto tiene una fortaleza √∫nica, gracias a la transparencia del c√≥digo, la comunidad detect√≥ y reaccion√≥ r√°pidamente de forma colaborativa, esa respuesta √°gil y abierta fue clave para contener la amenaza a tiempo.</p>

<p>Red Hat no se limita a usar software de c√≥digo abierto, participa activamente en su evoluci√≥n, lo mantiene y lo fortalece, es un actor clave dentro del ecosistema, con un conocimiento profundo de las normativas globales y una visi√≥n anticipada de las amenazas emergentes, Red Hat incorpora la seguridad desde el inicio y a lo largo de todo su ciclo de desarrollo de software (RHSDLC).</p>

<p>Adem√°s, su rol como participante ra√≠z del programa CVE y CNA lo coloca en una posici√≥n √∫nica, no solo identifica y eval√∫a vulnerabilidades, sino que ofrece a sus clientes soluciones concretas y respaldadas por un nivel de experiencia dif√≠cil de igualar.</p>

<p>Las organizaciones necesitan m√°s que solo software de c√≥digo abierto, necesitan una plataforma open source reforzada, gestionada y segura por dise√±o, aqu√≠ es donde los productos de Red Hat marcan la diferencia.</p>

<h2 id="red-hat-enterprise-linux-rhel-la-base-reforzada">Red Hat Enterprise Linux (RHEL): La Base Reforzada</h2>

<p>Toda estrategia de seguridad empresarial robusta debe construirse sobre una base s√≥lida, en el ecosistema de Red Hat, esa base es Red Hat Enterprise Linux (RHEL), no todas las distribuciones de Linux son iguales en lo que a seguridad se refiere. RHEL se distingue por un enfoque proactivo que abarca desde el cumplimiento de normativas globales y el endurecimiento del sistema hasta la preparaci√≥n para amenazas emergentes, a continuaci√≥n, exploramos algunas de las capas de defensa fundamentales integradas en RHEL.</p>

<h3 id="selinux-control-de-acceso-obligatorio-por-defecto">SELinux: Control de Acceso Obligatorio por Defecto</h3>
<p>La seguridad empresarial no consiste √∫nicamente en cerrar puertos y aplicar parches, es una estrategia continua que debe abarcar el control de acceso, la integridad del software, la detecci√≥n de intrusiones y la gesti√≥n proactiva de vulnerabilidades.</p>

<p>La primera l√≠nea de defensa es controlar estrictamente qui√©n puede acceder a qu√© recursos y qu√© software puede ejecutarse, y no se puede hablar de seguridad en RHEL sin mencionar a SELinux (Security-Enhanced Linux), una herramienta de seguridad avanzada que viene activada por defecto en sistemas RHEL.</p>

<p>Aunque SELinux puede parecer una fuente de complicaciones especialmente cuando impide que aplicaciones personalizadas funcionen o bloquea el acceso a ciertas rutas o puertos, en realidad est√° haciendo su trabajo, aplicar un modelo de Control de Acceso Obligatorio (MAC). A diferencia del enfoque tradicional basado en permisos de archivos (DAC), SELinux define pol√≠ticas estrictas y altamente granulares que controlan el comportamiento de usuarios, servicios y procesos. Utiliza etiquetas y tipos para decidir qu√© acciones est√°n permitidas en archivos, carpetas y puertos, y cu√°les no.</p>

<p>Tomemos el servicio web httpd como ejemplo pr√°ctico.</p>

<p>Por defecto:</p>

<ul>
  <li>El proceso httpd se ejecuta con el tipo SELinux httpd_t</li>
</ul>

<p><img src="/assets/images/SERH2.png" alt="Texto alternativo" /></p>

<ul>
  <li>El contenido en /var/www/html/ tiene la etiqueta httpd_sys_content_t, lo que permite que el servicio acceda a esos archivos.</li>
</ul>

<p><img src="/assets/images/SERH3.png" alt="Texto alternativo" /></p>

<ul>
  <li>Los puertos habituales como 80, 443, 8008 y 8443 est√°n etiquetados como http_port_t, lo que autoriza a httpd a utilizarlos.</li>
</ul>

<p><img src="/assets/images/SERH4.png" alt="Texto alternativo" /></p>

<p>Supongamos que decidimos desplegar un sitio personalizado en /var/www/my_site y queremos servirlo desde el puerto 4449, en ese momento, SELinux va a bloquear la operaci√≥n. ¬øPor qu√©? Porque ni el directorio ni el puerto tienen las etiquetas adecuadas, para que httpd pueda operar correctamente, debemos etiquetar el nuevo directorio con httpd_sys_content_t y asociar el puerto 4449 con el tipo http_port_t.</p>

<p>Este tipo de intervenciones son comunes cuando se trabaja con aplicaciones personalizadas, y lejos de ser una molestia, representan una oportunidad para reforzar la seguridad, asegur√°ndonos de que nada fuera de lo previsto pueda ejecutarse sin autorizaci√≥n expl√≠cita.</p>

<p>Afortunadamente, RHEL ofrece herramientas para facilitar este proceso. Por ejemplo, existe un rol de sistema espec√≠fico para SELinux en Ansible, que permite automatizar la verificaci√≥n y asignaci√≥n de etiquetas de forma sencilla y repetible, ideal para despliegues a gran escala o entornos CI/CD, estos son algunos ejemplos del rol rhel-system-roles.selinux.</p>

<p><img src="/assets/images/SERH5.png" alt="Texto alternativo" /></p>

<p><img src="/assets/images/SERH6.png" alt="Texto alternativo" /></p>

<p>### AIDE: Monitorizaci√≥n de la Integridad del Sistema</p>

<p>Mientras SELinux proporciona una defensa proactiva al prevenir acciones no autorizadas, una estrategia completa tambi√©n necesita detectar cambios que ya han ocurrido, aqu√≠ es donde la monitorizaci√≥n de la integridad de archivos se vuelve crucial, uno de los m√©todos m√°s comunes utilizados por atacantes consiste en modificar archivos o procesos ya existentes dentro del sistema, inyectando c√≥digo malicioso o alterando configuraciones cr√≠ticas. Este tipo de cambios, muchas veces sutiles, pueden abrir la puerta a vulnerabilidades graves o ser el inicio de un ataque m√°s amplio.</p>

<p>Para enfrentar este riesgo, RHEL incluye AIDE (Advanced Intrusion Detection Environment), una herramienta que act√∫a como un sistema de monitoreo de integridad. Su funci√≥n principal es detectar cualquier cambio no autorizado en los archivos del sistema, lo hace manteniendo una base de datos con el estado esperado de cada archivo y directorio, y compar√°ndola con el estado actual del sistema, as√≠, si se a√±ade, borra, modifica o mueve un archivo, AIDE lo reportar√°.</p>

<p>Se necesita crear una base de datos inicial que represente el estado actual del sistema</p>

<p><img src="/assets/images/SERH7.png" alt="Texto alternativo" /></p>

<p>Esto generar√° un archivo con el nombre /var/lib/aide/aide.db.new.gz, esta base de datos contiene hashes y metadatos de los archivos escaneados. En una instalaci√≥n t√≠pica puede incluir m√°s de 50.000 entradas.</p>

<p>Para empezar a usar esta base como referencia para futuros chequeos, simplemente se renombra a aide.db.gz, lo podemos hacer escribiendo en la terminal sudo mv /var/lib/aide/aide.db.new.gz /var/lib/aide/aide.db.gz</p>

<p>Con AIDE ya configurado, puedes comenzar a detectar cambios en el sistema en cualquier momento ejecutando aide ‚Äì-check, puedes configurar en /etc/aide.conf los cambios que quieres que detecte.</p>

<p>En caso de encontrar diferencias entre la base de datos y el sistema actual, AIDE informar√° detalladamente. En este ejemplo creo un archivo dentro del directorio /root llamado test-aide-demo, al analizar la base de datos autom√°ticamente detecta los cambios e informa.</p>

<p><img src="/assets/images/SERH8.png" alt="Texto alternativo" /></p>

<p>Esto puede indicar que un archivo fue modificado, agregado o incluso solo accedido.</p>

<p>Esto garantiza que cualquier cambio inesperado en el sistema pueda ser detectado r√°pidamente, permitiendo tomar acciones antes de que se conviertan en una brecha de seguridad.</p>

<h3 id="red-hat-insights-seguridad-predictiva-y-a-escala">Red Hat Insights: Seguridad Predictiva y a Escala</h3>

<p>Mientras que herramientas como SELinux y AIDE aseguran la integridad de un sistema individual, el verdadero desaf√≠o empresarial es aplicar esta disciplina a escala. ¬øC√≥mo garantizamos que cientos o miles de sistemas no solo est√©n protegidos, sino que cumplan con normativas y respondan a las amenazas de forma unificada? Aqu√≠ es donde la estrategia de Red Hat escala con Red Hat Insights.</p>

<p>Imaginate un analista de sistemas experto revisando incansablemente cada uno de sus sistemas RHEL, 24/7, este analista no solo detecta problemas, sino que predice fallos y entrega la soluci√≥n exacta, a menudo como un script de automatizaci√≥n listo para usar, eso es, en esencia, Red Hat Insights</p>

<p>Es un servicio SaaS (Software como Servicio) que se conecta de forma segura a tu entorno RHEL, ya sea on-premise, en la nube p√∫blica o en un entorno h√≠brido, recopila datos an√≥nimos de configuraci√≥n y telemetr√≠a, los compara con una knowledge base masiva curada por los ingenieros de Red Hat y te devuelve recomendaciones personalizadas y priorizadas. Veamos c√≥mo transforma los desaf√≠os diarios en tareas manejables.</p>

<p>No se limita a detectar problemas de seguridad los entiende y te ayuda a resolverlos, su servicio de Vulnerability va mucho m√°s all√° de mostrar una lista de CVEs. Por cada vulnerabilidad encontrada, te ofrece contexto claro y √∫til, qu√© sistemas est√°n afectados, qu√© tan grave es (seg√∫n el est√°ndar CVSS), y lo m√°s importante, si ya existe un exploit conocido que podr√≠a ser usado por atacantes, adem√°s, gu√≠a paso a paso hacia la soluci√≥n, indicando exactamente qu√© actualizaci√≥n aplicar o qu√© recurso t√©cnico consultar para resolver la vulnerabilidad.</p>

<p>Y aqu√≠ es donde pasa de ser una herramienta de an√°lisis a una de acci√≥n si una vulnerabilidad cr√≠tica afecta a decenas o cientos de servidores, corregirla uno por uno ser√≠a lento, complicado y con riesgo de error. Insights automatiza ese proceso generando, con un solo clic, un Playbook personalizado. Este no es un guion gen√©rico, sino un conjunto de instrucciones precisas para aplicar solo en los sistemas que t√∫ elijas, con las tareas exactas para solucionar la vulnerabilidad.</p>

<p><img src="/assets/images/SERH9.png" alt="Texto alternativo" /></p>

<p>Es importante destacar que Red Hat Insights es una plataforma multifac√©tica que va mucho m√°s all√° de la seguridad, sus servicios tambi√©n abarcan la gesti√≥n proactiva del cumplimiento (Compliance), la optimizaci√≥n del rendimiento y la estabilidad (Advisor) y el an√°lisis de la configuraci√≥n, sin embargo, en esta ocasi√≥n, √∫nicamente mencionamos Vulnerability, ya que aborda de manera directa el dilema del volumen de CVEs y la necesidad de una gesti√≥n basada en el riesgo real.</p>

<h2 id="red-hat-ansible-automation-platform-automatizaci√≥n-como-defensa">Red Hat Ansible Automation Platform: Automatizaci√≥n como Defensa</h2>

<p>Tener un plan de remediaci√≥n automatizado es solo la mitad de la batalla. ¬øC√≥mo se ejecuta ese plan de forma segura, controlada y auditable en toda la empresa? Aqu√≠ es donde entra Red Hat Ansible Automation Platform (AAP)</p>

<p>Ansible proporciona un lenguaje com√∫n y un motor de automatizaci√≥n unificado que permite a los equipos de seguridad orquestar acciones a trav√©s de m√∫ltiples productos y proveedores. Transforma tareas complejas y manuales en playbooks simples, legibles por humanos y reutilizables, esto no solo acelera dr√°sticamente la respuesta a incidentes, sino que tambi√©n fomenta una cultura de colaboraci√≥n, donde tanto los analistas de seguridad como los operadores de TI pueden entender, verificar y ejecutar las mismas automatizaciones.</p>

<h3 id="orquestaci√≥n-del-firewall-de-la-detecci√≥n-a-la-contenci√≥n">Orquestaci√≥n del Firewall: De la Detecci√≥n a la Contenci√≥n</h3>

<p>El firewall de una organizaci√≥n es su portero digital, el guardi√°n que decide qu√© tr√°fico entra y sale de la red, gestionar sus reglas es una de las tareas m√°s cr√≠ticas y, a menudo, m√°s tediosas, en un entorno empresarial t√≠pico, esto implica interactuar con soluciones de proveedores como Check Point, Palo Alto Networks, Fortinet, y otros, cada uno tiene su propia API y su propia l√≥gica. A trav√©s de roles y colecciones de contenido certificado, AAP facilita la interacci√≥n con distintos proveedores sin necesidad de adaptarse a cada interfaz o API espec√≠fica.</p>

<p><img src="/assets/images/SERH10.png" alt="Texto alternativo" /></p>

<p>Consideremos un escenario de respuesta a incidentes cl√°sico, un sistema de monitorizaci√≥n detecta un comportamiento sospechoso proveniente de una direcci√≥n IP externa. El an√°lisis confirma que se trata de un intento de ataque. La necesidad es inmediata, bloquear esa IP en el firewall perimetral para detener la amenaza en seco.</p>

<p>En un flujo de trabajo tradicional, este ser√≠a un proceso manual. Con Ansible, se convierte en una acci√≥n instant√°nea y automatizada. Utilizando el rol ansible_security.acl_manager, un analista puede ejecutar un playbook preaprobado y extraordinariamente simple. Este playbook no requiere conocimientos profundos de la sintaxis espec√≠fica del firewall simplemente define la intenci√≥n, se especifican variables claras y concisas como la IP de origen a bloquear, la IP de destino que se est√° protegiendo, y el tipo de sistema</p>

<p><img src="/assets/images/SERH11.png" alt="Texto alternativo" /></p>

<p>Al ejecutar este playbook, Ansible se conecta a la API del servidor de gesti√≥n de Check Point y traduce esta simple intenci√≥n en las acciones necesarias para crear y aplicar una nueva regla de seguridad, en segundos, la IP del atacante es bloqueada, la amenaza se contiene, y todo el proceso queda registrado y es auditable.</p>

<p>La misma l√≥gica se aplica a la inversa, una vez que el incidente ha sido investigado y resuelto, la misma acl_manager puede ser utilizada con una tarea de unblock_ip para eliminar la regla, asegurando que los bloqueos temporales no se conviertan en problemas operativos permanentes. Esta capacidad de gestionar el ciclo de vida completo de una regla de firewall de forma program√°tica, r√°pida y consistente es un cambio fundamental para cualquier equipo de seguridad</p>

<h3 id="gesti√≥n-de-idps-despliegue-de-reglas-a-escala">Gesti√≥n de IDPS: Despliegue de Reglas a Escala</h3>

<p>Si el firewall es ‚Äòel portero‚Äô, el Sistema de Detecci√≥n y Prevenci√≥n de Intrusiones (IDPS) es el perro guardi√°n que patrulla constantemente la red, buscando patrones de comportamiento malicioso. Herramientas como Snort son incre√≠blemente potentes, pero su eficacia depende enteramente de la calidad y actualidad de sus reglas, cuando surge una nueva amenaza o se descubre una nueva t√©cnica de ataque, es crucial desplegar una nueva firma de detecci√≥n en todos los sensores de IDPS de la organizaci√≥n de manera r√°pida y uniforme.</p>

<p>Aqu√≠, de nuevo, el proceso manual es un cuello de botella, iniciar sesi√≥n en cada servidor de Snort para editar manualmente los archivos de reglas es lento, propenso a errores de copia y pega, y dif√≠cil de escalar, a trav√©s de roles como ansible_security.ids_rule, los equipos pueden gestionar las firmas de Snort como si fueran c√≥digo.</p>

<p>Imaginemos que el equipo de seguridad descubre un nuevo tipo de ataque que intenta acceder al archivo /etc/passwd a trav√©s de peticiones web, se necesita una regla para detectar este patr√≥n de inmediato, en lugar de enviar un correo electr√≥nico con instrucciones, se crea un playbook.</p>

<p>Este playbook es un ejemplo de claridad y potencia, primero, se asegura de que la automatizaci√≥n se ejecute con los privilegios necesarios en el servidor Snort (become: true). Luego, especifica el proveedor (ids_provider: snort). La parte m√°s importante es la propia regla, definida en la variable ids_rule en la sintaxis nativa de Snort, pero gestionada y desplegada por Ansible. El playbook tambi√©n indica exactamente d√≥nde debe escribirse la regla (ids_rules_file) y que su estado debe ser presente, es decir, que se cree si no existe.</p>

<p><img src="/assets/images/SERH12.png" alt="Texto alternativo" /></p>

<p>Con la ejecuci√≥n de ansible-navigator, este playbook se conecta a todos los servidores Snort definidos en el inventario y a√±ade la nueva regla de forma at√≥mica y consistente. La verificaci√≥n es tan simple como conectarse a uno de los servidores y comprobar que la nueva l√≠nea ha sido a√±adida al final del archivo de reglas.</p>

<p>Los ejemplos de gesti√≥n de firewalls y IDPS son potentes por s√≠ solos, pero su verdadero valor transformador se revela cuando se combinan en flujos de trabajo de seguridad orquestados. Ansible Automation Platform no solo ejecuta tareas aisladas, permite construir una respuesta a incidentes coherente y de m√∫ltiples pasos que se ejecuta a la velocidad de la m√°quina, no a la velocidad humana.</p>

<p>Este nivel de automatizaci√≥n reduce el tiempo medio de respuesta (MTTR) de horas a meros segundos. Libera a los analistas de seguridad de tareas repetitivas y les permite centrarse en actividades de mayor valor, como la caza de amenazas y el an√°lisis estrat√©gico</p>

<h2 id="red-hat-openshift-seguridad-en-la-cadena-de-suministro-de-software">Red Hat OpenShift: Seguridad en la Cadena de Suministro de Software</h2>

<p>Hemos asegurado el sistema operativo y automatizado su gesti√≥n, pero las aplicaciones modernas ya no viven ah√≠, hoy se ejecutan en contenedores y se despliegan en nubes h√≠bridas, por eso, la estrategia de seguridad de Red Hat se extiende naturalmente a esta capa con ‚ÄòRed Hat OpenShift‚Äô.</p>

<p>En este apartado, nos enfocaremos en un aspecto clave de esa seguridad, la protecci√≥n de la cadena de suministro de software (software supply chain). No cubriremos toda la seguridad de OpenShift, sino c√≥mo garantizar que, desde la construcci√≥n hasta el despliegue, las aplicaciones sean leg√≠timas, confiables y seguras.</p>

<h3 id="construyendo-una-cadena-de-suministro-confiable">Construyendo una Cadena de Suministro Confiable</h3>

<p>El incidente XZ backdoor fue una llamada de atenci√≥n global, la seguridad no puede empezar en el servidor de producci√≥n, sino desde el origen mismo del software, para el mundo de los contenedores, esto significa proteger toda la cadena de suministro, desde la construcci√≥n de la imagen hasta su despliegue final.</p>

<p>Construir una cadena de suministro segura y confiable requiere cuidar cada etapa del ciclo de vida del software, desde la escritura del c√≥digo hasta su puesta en producci√≥n.</p>

<p>Todo comienza con la elecci√≥n de una imagen base. Hoy existen miles de im√°genes en repositorios p√∫blicos, pero no todas ofrecen el mismo nivel de calidad, mantenimiento o seguridad. Por eso, es responsabilidad de cada equipo elegir cuidadosamente.</p>

<p><img src="/assets/images/SERH13.png" alt="Texto alternativo" /></p>

<p>Muchas organizaciones prefieren partir de una imagen base m√≠nima, confiable y mantenida, como las Red Hat Universal Base Images (UBI), estas contienen solo lo esencial, lo que permite mantener el control total para aplicar parches r√°pido y reducir la superficie de ataque, agregando solo los frameworks y librer√≠as que la aplicaci√≥n necesita.</p>

<p>Pero, aunque una aplicaci√≥n pase todas las pruebas de seguridad y funcione perfectamente, ¬øc√≥mo estar seguros de que realmente fue construida con nuestro c√≥digo leg√≠timo? Un atacante podr√≠a haber insertado c√≥digo malicioso que robe informaci√≥n sin alterar el comportamiento visible.</p>

<p>Antes, documentos f√≠sicos se proteg√≠an con sellos que garantizaban su integridad. Hoy, esa funci√≥n la cumplen las firmas criptogr√°ficas.</p>

<p>Firmar digitalmente el c√≥digo fuente es un primer paso fundamental. Cada cambio debe llevar una firma que confirme la identidad del autor y asegure que el c√≥digo no fue alterado. Las pipelines de CI/CD deben rechazar autom√°ticamente cualquier commit sin firma v√°lida.</p>

<p>Del mismo modo, las im√°genes de contenedor deben firmarse en el momento de su creaci√≥n, para asegurar que provienen de una fuente confiable y no han sido modificadas. Plataformas como OpenShift pueden validar estas firmas antes del despliegue, permitiendo solo la ejecuci√≥n de im√°genes autorizadas.</p>

<p><img src="/assets/images/SERH14.png" alt="Texto alternativo" /></p>

<h3 id="escaneo-continuo-y-sbom-visibilidad-y-control">Escaneo Continuo y SBOM: Visibilidad y Control</h3>

<p>Incluso siguiendo estas mejores pr√°cticas, el riesgo de vulnerabilidades persiste, estas pueden venir desde la imagen base o surgir durante la construcci√≥n de la aplicaci√≥n.</p>

<p>Por eso, es crucial escanear las im√°genes en distintos puntos, revisar peri√≥dicamente las im√°genes base y, si se detecta alguna vulnerabilidad, reconstruirlas y actualizarlas, adem√°s, escanear cada nueva imagen antes de pasarla a producci√≥n, bloqueando cualquier imagen con fallas cr√≠ticas para devolverla al equipo de desarrollo.</p>

<p>Para tener visibilidad total sobre los componentes que integran una imagen, es fundamental generar un Software Bill of Materials (SBOM), que documenta todas las librer√≠as, frameworks y dependencias, facilitando auditor√≠as y evaluaciones de riesgo. Este inventario debe generarse y almacenarse junto con la imagen en el registro de contenedores.</p>

<h3 id="la-soluci√≥n-integrada-red-hat-trusted-software-supply-chain">La Soluci√≥n Integrada: Red Hat Trusted Software Supply Chain</h3>

<p>Para enfrentar todos estos desaf√≠os, Red Hat ofrece la Red Hat Trusted Software Supply Chain, una colecci√≥n de soluciones integradas que incorporan seguridad en cada etapa del ciclo de vida de las aplicaciones nativas de la nube.</p>

<p><img src="/assets/images/SERH15.png" alt="Texto alternativo" /></p>

<p>En lugar de que los equipos deban armar y asegurar por su cuenta una cadena de herramientas y componentes dispares, Red Hat entrega una plataforma completa, f√°cil de usar y cohesiva, que conecta todo de forma segura y confiable.</p>

<p>La plataforma integra un conjunto de herramientas dise√±adas para cubrir todo el ciclo de vida del software, desde el desarrollo hasta la producci√≥n, asegurando agilidad y confianza en cada etapa. Para la fase de desarrollo, Red Hat Developer Hub act√∫a como un portal centralizado que simplifica la creaci√≥n de aplicaciones, permitiendo a los equipos enfocarse en el c√≥digo en lugar de la complejidad de la infraestructura. Este proceso se construye sobre las Universal Base Images, que ofrecen un cimiento fiable y seguro para minimizar riesgos desde el inicio.</p>

<p>Para asegurar la cadena de suministro, Trusted Artefact Signer aplica una firma digital al software para validar su autenticidad. A su vez, Trusted Profile Analyzer eval√∫a de forma inteligente las dependencias para identificar solo las vulnerabilidades que suponen un riesgo real. La gesti√≥n de estas im√°genes se centraliza en Quay, un registro que las almacena de forma segura y las analiza continuamente en busca de amenazas.</p>

<p>Finalmente, OpenShift act√∫a como el motor de orquestaci√≥n que automatiza el despliegue y la gesti√≥n de las aplicaciones, mientras que Advanced Cluster Security a√±ade una capa de protecci√≥n en tiempo de ejecuci√≥n, monitoreando el entorno y garantizando el cumplimiento de las pol√≠ticas de seguridad.</p>

<p>Con esta oferta, Red Hat acompa√±a a los equipos para construir, verificar y desplegar software seguro y confiable, desde el primer c√≥digo hasta la aplicaci√≥n en producci√≥n.</p>

<h2 id="conclusiones-y-reflexiones-finales">Conclusiones y Reflexiones Finales</h2>

<p>El modelo open source, por su naturaleza transparente, tiende a reportar m√°s vulnerabilidades que el software propietario, lo cual no significa que sea menos seguro, sino que permite un an√°lisis m√°s honesto y riguroso del riesgo real. En lugar de dejarnos llevar por el n√∫mero de CVEs publicados, debemos cambiar el foco hacia la verdadera prioridad, entender qu√© vulnerabilidades representan un riesgo real y cu√°les no. Este enfoque basado en el riesgo y no en la cantidad es indispensable en un mundo donde la estrategia de parches tradicional ya no es suficiente.</p>

<p>Red Hat demuestra que no basta con consumir software libre, sino que se requiere un enfoque proactivo y estructurado para convertirlo en una verdadera plataforma empresarial segura. Herramientas como las que hemos hablado aqu√≠, permiten construir una defensa integral que abarca desde el control de accesos, hasta la seguridad en entornos de contenedores. Todo esto bajo una misma visi√≥n coherente, donde la protecci√≥n se integra desde la creaci√≥n del software hasta su despliegue.</p>]]></content><author><name>Xavi Vico Marti</name></author><category term="Seguridad" /><category term="Red Hat" /><category term="Open Source" /><category term="RHEL" /><category term="SELinux" /><category term="Ansible" /><category term="OpenShift" /><category term="CVE" /><category term="Seguridad Empresarial" /><summary type="html"><![CDATA[Exploramos c√≥mo Red Hat refuerza la seguridad empresarial m√°s all√° del software de c√≥digo abierto, integrando RHEL, SELinux, Ansible, Insights y OpenShift.]]></summary></entry></feed>